# ‚úÖ –û—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ Telegram –¥–ª—è –ø—Ä–æ–±–ª–µ–º—ã —Å —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ–º

## üìö –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –∏–∑ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏

–°–æ–≥–ª–∞—Å–Ω–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ Telegram Web Apps (https://core.telegram.org/bots/webapps):

### –°–æ–±—ã—Ç–∏—è –∂–∏–∑–Ω–µ–Ω–Ω–æ–≥–æ —Ü–∏–∫–ª–∞ (Bot API 8.0+)

1. **`activated`** - –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∫–æ–≥–¥–∞ Mini App —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –∞–∫—Ç–∏–≤–Ω–æ–π
   - –ù–∞–ø—Ä–∏–º–µ—Ä: –æ—Ç–∫—Ä—ã—Ç–∞ –∏–∑ —Å–≤–µ—Ä–Ω—É—Ç–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∏–ª–∏ –≤—ã–±—Ä–∞–Ω–∞ —Å—Ä–µ–¥–∏ –≤–∫–ª–∞–¥–æ–∫
   - Event handler –Ω–µ –ø–æ–ª—É—á–∞–µ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

2. **`deactivated`** - –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∫–æ–≥–¥–∞ Mini App —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –Ω–µ–∞–∫—Ç–∏–≤–Ω–æ–π
   - –ù–∞–ø—Ä–∏–º–µ—Ä: —Å–≤–µ—Ä–Ω—É—Ç–∞ –∏–ª–∏ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∞ –≤ –Ω–µ–∞–∫—Ç–∏–≤–Ω—É—é –≤–∫–ª–∞–¥–∫—É
   - Event handler –Ω–µ –ø–æ–ª—É—á–∞–µ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

3. **`viewportChanged`** - –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∫–æ–≥–¥–∞ –≤–∏–¥–∏–º–∞—è —Å–µ–∫—Ü–∏—è Mini App –∏–∑–º–µ–Ω—è–µ—Ç—Å—è
   - Event handler –ø–æ–ª—É—á–∞–µ—Ç –æ–±—ä–µ–∫—Ç —Å –ø–æ–ª–µ–º `isStateStable`
   - –ï—Å–ª–∏ `isStateStable = true`, –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–æ
   - –ï—Å–ª–∏ `isStateStable = false`, –∏–∑–º–µ–Ω–µ–Ω–∏–µ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç—Å—è

### –ü–æ–ª—è WebApp

- **`isActive`** (Bot API 8.0+) - Boolean
  - `True`, –µ—Å–ª–∏ Mini App –≤ –¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç –∞–∫—Ç–∏–≤–Ω–∞
  - `False`, –µ—Å–ª–∏ Mini App —Å–≤–µ—Ä–Ω—É—Ç–∞

## üîß –ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ —Å–æ–≥–ª–∞—Å–Ω–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏

### –ß—Ç–æ –Ω—É–∂–Ω–æ –¥–µ–ª–∞—Ç—å:

1. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–æ–±—ã—Ç–∏–µ `activated`** –¥–ª—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –ø—Ä–∏ –≤–æ–∑–≤—Ä–∞—Ç–µ
2. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–æ–±—ã—Ç–∏–µ `deactivated`** –¥–ª—è –ø—Ä–∏–æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –æ–ø–µ—Ä–∞—Ü–∏–π –ø—Ä–∏ —Å–≤–æ—Ä–∞—á–∏–≤–∞–Ω–∏–∏
3. **–ü—Ä–æ–≤–µ—Ä—è—Ç—å `isActive`** –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ç–µ–∫—É—â–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è
4. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `viewportChanged`** –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤–∏–¥–∏–º–æ—Å—Ç–∏

### –ß—Ç–æ –ù–ï –Ω—É–∂–Ω–æ –¥–µ–ª–∞—Ç—å:

- ‚ùå –ù–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Å–æ–±—ã—Ç–∏—è —Ç–∏–ø–∞ `visibilityChanged` (—Ç–∞–∫–æ–≥–æ –Ω–µ—Ç –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏)
- ‚ùå –ù–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `onViewportChanged` –∫–∞–∫ –º–µ—Ç–æ–¥ (—ç—Ç–æ —Å–æ–±—ã—Ç–∏–µ, –Ω–µ –º–µ—Ç–æ–¥)
- ‚ùå –ù–µ –ø–æ–ª–∞–≥–∞—Ç—å—Å—è —Ç–æ–ª—å–∫–æ –Ω–∞ `document.visibilitychange` (—ç—Ç–æ –±—Ä–∞—É–∑–µ—Ä–Ω–æ–µ API, –Ω–µ Telegram)

## üìù –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è

```javascript
// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Telegram WebApp
if (window.Telegram?.WebApp) {
  const tg = window.Telegram.WebApp;
  
  tg.ready();
  tg.expand();
  
  // ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û: –ò—Å–ø–æ–ª—å–∑—É–µ–º –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è Telegram
  tg.onEvent('activated', () => {
    console.log('Mini App –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–∞ - –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ');
    tg.expand();
    tg.ready(); // –ü–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–∞–µ–º—Å—è
  });
  
  tg.onEvent('deactivated', () => {
    console.log('Mini App –¥–µ–∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–∞ - –ø—Ä–∏–æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –æ–ø–µ—Ä–∞—Ü–∏–∏');
    // –ú–æ–∂–Ω–æ –ø—Ä–∏–æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ç—è–∂–µ–ª—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏
  });
  
  tg.onEvent('viewportChanged', (event) => {
    if (event.isStateStable) {
      console.log('Viewport —Å—Ç–∞–±–∏–ª–∏–∑–∏—Ä–æ–≤–∞–ª—Å—è');
      // –ú–æ–∂–Ω–æ –æ–±–Ω–æ–≤–∏—Ç—å UI –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
    }
  });
  
  // ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û: –ü—Ä–æ–≤–µ—Ä—è–µ–º isActive –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
  if (tg.isActive) {
    // Mini App –∞–∫—Ç–∏–≤–Ω–∞
  }
}
```

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è –∏–∑ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏

1. **–°–æ–±—ã—Ç–∏—è `activated` –∏ `deactivated` –¥–æ—Å—Ç—É–ø–Ω—ã —Ç–æ–ª—å–∫–æ –≤ Bot API 8.0+**
   - –ù—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –≤–µ—Ä—Å–∏—é: `tg.isVersionAtLeast('8.0')`

2. **–ü–æ–ª–µ `isActive` –¥–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –≤ Bot API 8.0+**
   - –í—Å–µ–≥–¥–∞ –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ –≤–µ—Ä—Å–∏—é –ø–µ—Ä–µ–¥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º

3. **`viewportChanged` –¥–æ—Å—Ç—É–ø–µ–Ω –≤–æ –≤—Å–µ—Ö –≤–µ—Ä—Å–∏—è—Ö**
   - –ù–æ –ø–∞—Ä–∞–º–µ—Ç—Ä `isStateStable` –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ –≤–æ –≤—Å–µ—Ö –≤–µ—Ä—Å–∏—è—Ö

## üéØ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

1. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø—Ä–æ–≤–µ—Ä–∫—É –≤–µ—Ä—Å–∏–∏** –ø–µ—Ä–µ–¥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –Ω–æ–≤—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π
2. **–û–±—Ä–∞–±–∞—Ç—ã–≤–∞–π—Ç–µ –æ–±–∞ —Å–æ–±—ã—Ç–∏—è** - `activated` –∏ `deactivated`
3. **–ù–µ –ø–æ–ª–∞–≥–∞–π—Ç–µ—Å—å —Ç–æ–ª—å–∫–æ –Ω–∞ –±—Ä–∞—É–∑–µ—Ä–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è** - –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è Telegram
4. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `isActive`** –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ç–µ–∫—É—â–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è

## üìñ –°—Å—ã–ª–∫–∏ –Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é

- –û—Å–Ω–æ–≤–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: https://core.telegram.org/bots/webapps
- –°–æ–±—ã—Ç–∏—è: https://core.telegram.org/bots/webapps#events-available-for-mini-apps
- –ü–æ–ª—è WebApp: https://core.telegram.org/bots/webapps#initializing-mini-apps
