# üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç: –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–∏ –∏–Ω–¥–µ–∫—Å–æ–≤

## ‚ùì –†–∞—Å—à–∏—Ä–µ–Ω–∏—è PostgreSQL - –ù–ï –Ω—É–∂–Ω—ã!

–î–ª—è —ç—Ç–æ–π –º–∏–≥—Ä–∞—Ü–∏–∏ **—Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è PostgreSQL –ù–ï —Ç—Ä–µ–±—É—é—Ç—Å—è**. –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Ç–æ–ª—å–∫–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ PostgreSQL (–∏–Ω–¥–µ–∫—Å—ã B-tree).

## ‚úÖ –°–∞–º—ã–π –ø—Ä–æ—Å—Ç–æ–π —Å–ø–æ—Å–æ–± (—á–µ—Ä–µ–∑ API)

Railway **–Ω–µ –∏–º–µ–µ—Ç –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –¥–ª—è SQL**, –ø–æ—ç—Ç–æ–º—É –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ API endpoint:

### –ß–µ—Ä–µ–∑ curl:
```bash
curl -X POST https://–≤–∞—à-api.railway.app/admin/apply-performance-indexes \
  -H "X-Admin-Key: –í–ê–®_ADMIN_API_KEY"
```

### –ß–µ—Ä–µ–∑ Postman:
1. –ú–µ—Ç–æ–¥: `POST`
2. URL: `https://–≤–∞—à-api.railway.app/admin/apply-performance-indexes`
3. Headers:
   - `X-Admin-Key: –≤–∞—à_–∞–¥–º–∏–Ω_–∫–ª—é—á` (–∏–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –æ–∫—Ä—É–∂–µ–Ω–∏—è `ADMIN_API_KEY`)

### –û—Ç–≤–µ—Ç –ø—Ä–∏ —É—Å–ø–µ—Ö–µ:
```json
{
  "detail": "–ú–∏–≥—Ä–∞—Ü–∏—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ. –í—ã–ø–æ–ª–Ω–µ–Ω–æ –∫–æ–º–∞–Ω–¥: 15/15",
  "applied_commands": 15,
  "total_commands": 15
}
```

## üîÑ –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ —Å–ø–æ—Å–æ–±—ã

–ï—Å–ª–∏ API –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ:

1. **Railway CLI:**
   ```bash
   railway run python3 backend/run_migrations_performance.py
   ```

2. **–í–Ω–µ—à–Ω–∏–π PostgreSQL –∫–ª–∏–µ–Ω—Ç** (DBeaver, pgAdmin):
   - –ü–æ–ª—É—á–∏—Ç–µ —Å—Ç—Ä–æ–∫—É –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∏–∑ Railway
   - –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ –ë–î
   - –í—ã–ø–æ–ª–Ω–∏—Ç–µ SQL –∏–∑ `backend/migrations/006_add_performance_indexes.sql`

–ü–æ–¥—Ä–æ–±–Ω–µ–µ: —Å–º. `RAILWAY_DB_MIGRATION_GUIDE.md`

## ‚úÖ –ü–æ—Å–ª–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –º–∏–≥—Ä–∞—Ü–∏–∏

1. –î–æ–±–∞–≤—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –≤ Railway (—Å–º. `PERFORMANCE_SUMMARY_RU.md`)
2. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–∏—Å
3. –ì–æ—Ç–æ–≤–æ! üéâ
