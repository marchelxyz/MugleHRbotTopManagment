import{r,j as e,A as de,B as Ge,C as Ne,D as ze,E as we,x as qe,s as Se,G as ke,H as xe,J as We,K as Ve,L as Oe,M as He,N as Ye,O as Qe,P as Je,v as Ke,Q as Xe,S as Ze,T as et,t as le,u as ee,U as tt,k as _e,l as ge,V as te,q as st,W as Be,X as Ie,Y as nt}from"./react-vendor-CTCOu_cH.js";import{P as at}from"./PageLayout-BcvhvPkp.js";import{u as V,f as Y,q as rt,s as it,t as ot,v as lt,w as ct,x as dt,y as ne,z as ut,A as pt,B as ht,C as mt,D as xt,E as _t,F as gt,G as ie,H as jt,I as ft,J as je,K as bt,L as yt,M as vt,N as Ct,O as Nt,P as wt,Q as St,R as kt,S as Bt,T as It,U as Lt,V as At,W as Pt,X as $t,Y as Dt,Z as Et,$ as Ft,a0 as Tt,a1 as Ut,a2 as Mt,a3 as Rt,a4 as Gt,a5 as zt,a6 as qt,a7 as Wt,a8 as Vt,a9 as Ot}from"./index-DWD9sWeV.js";import{b as ce}from"./dateFormatter-NZopE8Q3.js";import{C as ue,a as Le,L as Ae,b as Pe,p as $e,c as pe,d as he,A as Ht}from"./chart-vendor-CqyaVfOQ.js";import{U as De}from"./UserAvatar-CqB16UTw.js";import"./vendor-62T33e3N.js";import"./lottie-vendor-CdbPF2lo.js";import"./date-vendor-BIBOd_sa.js";import"./axios-vendor-D5lHaTRS.js";const Yt="_grid_1nn2c_1",Qt="_gridButton_1nn2c_8",Jt="_backButton_1nn2c_27",Kt="_card_1nn2c_39",Xt="_input_1nn2c_55",Zt="_select_1nn2c_56",es="_textarea_1nn2c_57",ts="_checkboxLabel_1nn2c_72",ss="_buttonGreen_1nn2c_83",ns="_buttonGrey_1nn2c_99",as="_message_1nn2c_114",rs="_list_1nn2c_120",is="_listItem_1nn2c_126",os="_listItemImage_1nn2c_135",ls="_listItemContent_1nn2c_143",cs="_listItemActions_1nn2c_152",ds="_buttonSmall_1nn2c_160",us="_buttonSmallRed_1nn2c_175",ps="_pricePreview_1nn2c_191",hs="_tabs_1nn2c_203",ms="_tab_1nn2c_203",xs="_tabActive_1nn2c_208",_s="_imageUploader_1nn2c_223",gs="_imagePreview_1nn2c_230",js="_imagePlaceholder_1nn2c_230",fs="_descriptionWrapper_1nn2c_274",bs="_charCounter_1nn2c_286",ys="_restoreButton_1nn2c_297",vs="_statixSettingsGrid_1nn2c_333",Cs="_settingGroup_1nn2c_340",s={grid:Yt,gridButton:Qt,backButton:Jt,card:Kt,input:Xt,select:Zt,textarea:es,checkboxLabel:ts,buttonGreen:ss,buttonGrey:ns,message:as,list:rs,listItem:is,listItemImage:os,listItemContent:ls,listItemActions:cs,buttonSmall:ds,buttonSmallRed:us,pricePreview:ps,tabs:hs,tab:ms,tabActive:xs,imageUploader:_s,imagePreview:gs,imagePlaceholder:js,descriptionWrapper:fs,charCounter:bs,restoreButton:ys,statixSettingsGrid:vs,settingGroup:Cs},oe={image_url:"",link_url:"",is_active:!0,position:"feed"};function Ns(){const{showAlert:t}=V(),{confirm:l}=Y(),[i,h]=r.useState([]),[o,g]=r.useState(oe),[d,p]=r.useState(null),[n,C]=r.useState(!1),[b,y]=r.useState("");r.useEffect(()=>{x()},[]);const x=async()=>{try{const _=await rt();h(_.data)}catch{y("–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –±–∞–Ω–Ω–µ—Ä–æ–≤.")}},j=_=>{const{name:I,value:B,type:M,checked:f}=_.target;g(P=>({...P,[I]:M==="checkbox"?f:B}))},c=async _=>{_.preventDefault(),C(!0),y("");try{d?(await it(d,o),y("–ë–∞–Ω–Ω–µ—Ä —É—Å–ø–µ—à–Ω–æ –æ–±–Ω–æ–≤–ª–µ–Ω!")):(await ot(o),y("–ë–∞–Ω–Ω–µ—Ä —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω!")),g(oe),p(null),x()}catch{y("–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞.")}finally{C(!1)}},u=_=>{p(_.id),g({image_url:_.image_url,link_url:_.link_url||"",is_active:_.is_active,position:_.position||"feed"})},v=()=>{p(null),g(oe)},k=async _=>{if(await l("–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ","–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —ç—Ç–æ—Ç –±–∞–Ω–Ω–µ—Ä?"))try{await lt(_),t("–ë–∞–Ω–Ω–µ—Ä —É–¥–∞–ª–µ–Ω.","success"),x()}catch{t("–û—à–∏–±–∫–∞ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏.","error")}};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:s.card,children:[e.jsx("h2",{children:d?"–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –±–∞–Ω–Ω–µ—Ä–∞":"–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π –±–∞–Ω–Ω–µ—Ä"}),e.jsxs("form",{onSubmit:c,children:[e.jsx("input",{type:"text",name:"image_url",value:o.image_url,onChange:j,placeholder:"URL –∫–∞—Ä—Ç–∏–Ω–∫–∏ –¥–ª—è –±–∞–Ω–Ω–µ—Ä–∞",className:s.input,required:!0}),e.jsx("input",{type:"text",name:"link_url",value:o.link_url,onChange:j,placeholder:"URL –¥–ª—è –ø–µ—Ä–µ—Ö–æ–¥–∞ (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)",className:s.input}),e.jsxs("select",{name:"position",value:o.position,onChange:j,className:s.input,children:[e.jsx("option",{value:"feed",children:"–ë–∞–Ω–Ω–µ—Ä –≤ –ª–µ–Ω—Ç–µ (–≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—ã–π)"}),e.jsx("option",{value:"main",children:"–ì–ª–∞–≤–Ω—ã–π –±–∞–Ω–Ω–µ—Ä (–≤–µ—Ä—Ö–Ω–∏–π)"})]}),e.jsxs("label",{className:s.checkboxLabel,children:[e.jsx("input",{type:"checkbox",name:"is_active",checked:o.is_active,onChange:j}),"–ê–∫—Ç–∏–≤–µ–Ω (–ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º)"]}),e.jsx("button",{type:"submit",disabled:n,className:s.buttonGreen,children:n?"–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ...":d?"–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è":"–°–æ–∑–¥–∞—Ç—å –±–∞–Ω–Ω–µ—Ä"}),d&&e.jsx("button",{type:"button",onClick:v,className:s.buttonGrey,children:"–û—Ç–º–µ–Ω–∞"}),b&&e.jsx("p",{className:s.message,children:b})]})]}),e.jsxs("div",{className:s.card,children:[e.jsx("h2",{children:"–°–ø–∏—Å–æ–∫ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –±–∞–Ω–Ω–µ—Ä–æ–≤"}),e.jsx("div",{className:s.list,children:i.map(_=>e.jsxs("div",{className:s.listItem,children:[e.jsx("img",{src:_.image_url,alt:"banner",className:s.listItemImage,loading:"lazy"}),e.jsxs("div",{className:s.listItemContent,children:[e.jsxs("p",{children:[e.jsx("b",{children:"–ü–æ–∑–∏—Ü–∏—è:"})," ",_.position==="main"?"–ì–ª–∞–≤–Ω—ã–π":"–í –ª–µ–Ω—Ç–µ"]}),e.jsxs("p",{children:[e.jsx("b",{children:"–°—Ç–∞—Ç—É—Å:"})," ",_.is_active?"‚úÖ –ê–∫—Ç–∏–≤–µ–Ω":"‚ùå –°–∫—Ä—ã—Ç"]})]}),e.jsxs("div",{className:s.listItemActions,children:[e.jsx("button",{onClick:()=>u(_),className:s.buttonSmall,children:"‚úèÔ∏è"}),e.jsx("button",{onClick:()=>k(_.id),className:s.buttonSmallRed,children:"üóëÔ∏è"})]})]},_.id))})]})]})}const fe=()=>{const{showAlert:t}=V(),[l,i]=r.useState({name:"–ë–æ–Ω—É—Å—ã Statix",description:"–ü–æ–∫—É–ø–∫–∞ –±–æ–Ω—É—Å–æ–≤ –¥–ª—è –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã Statix",image_url:"",thanks_to_statix_rate:10,min_bonus_per_step:100,max_bonus_per_step:1e4,bonus_step:100}),[h,o]=r.useState(!1);r.useEffect(()=>{g()},[]);const g=async()=>{o(!0);try{const n=await ct();i(n.data)}catch{t("–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Statix Bonus.","error")}finally{o(!1)}},d=n=>{const{name:C,value:b,type:y,checked:x}=n.target;i(j=>({...j,[C]:y==="checkbox"?x:y==="number"?parseInt(b)||0:b}))},p=async n=>{n.preventDefault(),o(!0);try{await dt(l),t("–ù–∞—Å—Ç—Ä–æ–π–∫–∏ Statix Bonus –æ–±–Ω–æ–≤–ª–µ–Ω—ã!","success"),ne("market")}catch{t("–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ –Ω–∞—Å—Ç—Ä–æ–µ–∫.","error")}finally{o(!1)}};return e.jsxs("div",{className:s.card,children:[e.jsxs("h2",{children:[e.jsx(de,{style:{marginRight:"8px"}}),"–ù–∞—Å—Ç—Ä–æ–π–∫–∏ Statix Bonus"]}),e.jsxs("form",{onSubmit:p,children:[e.jsx("div",{className:s.imageUploader,children:l.image_url?e.jsx("img",{src:l.image_url,alt:"–ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä",className:s.imagePreview,onError:n=>{n.target.style.display="none"},onLoad:n=>{n.target.style.display="block"}}):e.jsx("div",{className:s.imagePlaceholder,children:"–§–æ—Ç–æ (4:3)"})}),e.jsx("input",{type:"text",name:"image_url",value:l.image_url,onChange:d,placeholder:"–°—Å—ã–ª–∫–∞ –Ω–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ (URL) 4:3",className:s.input}),e.jsx("input",{type:"text",name:"name",value:l.name,onChange:d,placeholder:"–ù–∞–∑–≤–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞",className:s.input,required:!0}),e.jsx("textarea",{name:"description",placeholder:"–û–ø–∏—Å–∞–Ω–∏–µ",value:l.description,onChange:d,maxLength:"120",className:s.textarea}),e.jsxs("div",{className:s.statixSettingsGrid,children:[e.jsxs("div",{className:s.settingGroup,children:[e.jsx("label",{children:"–ö—É—Ä—Å –≤–∞–ª—é—Ç (—Å–ø–∞—Å–∏–±–æ–∫ –∑–∞ 100 –±–æ–Ω—É—Å–æ–≤)"}),e.jsx("input",{type:"number",name:"thanks_to_statix_rate",value:l.thanks_to_statix_rate,onChange:d,className:s.input,min:"1",required:!0})]}),e.jsxs("div",{className:s.settingGroup,children:[e.jsx("label",{children:"–ú–∏–Ω–∏–º—É–º –±–æ–Ω—É—Å–æ–≤ –∑–∞ —à–∞–≥"}),e.jsx("input",{type:"number",name:"min_bonus_per_step",value:l.min_bonus_per_step,onChange:d,className:s.input,min:"1",required:!0})]}),e.jsxs("div",{className:s.settingGroup,children:[e.jsx("label",{children:"–ú–∞–∫—Å–∏–º—É–º –±–æ–Ω—É—Å–æ–≤ –∑–∞ —à–∞–≥"}),e.jsx("input",{type:"number",name:"max_bonus_per_step",value:l.max_bonus_per_step,onChange:d,className:s.input,min:"1",required:!0})]}),e.jsxs("div",{className:s.settingGroup,children:[e.jsx("label",{children:"–®–∞–≥ —É–≤–µ–ª–∏—á–µ–Ω–∏—è –±–æ–Ω—É—Å–æ–≤"}),e.jsx("input",{type:"number",name:"bonus_step",value:l.bonus_step,onChange:d,className:s.input,min:"1",required:!0})]})]}),e.jsxs("div",{className:s.pricePreview,children:[e.jsx("p",{children:e.jsx("strong",{children:"–ü—Ä–∏–º–µ—Ä—ã –∫—É—Ä—Å–∞:"})}),e.jsx("p",{children:"10 —Å–ø–∞—Å–∏–±–æ–∫ = 100 –±–æ–Ω—É—Å–æ–≤"}),e.jsx("p",{children:"20 —Å–ø–∞—Å–∏–±–æ–∫ = 200 –±–æ–Ω—É—Å–æ–≤"}),e.jsx("p",{children:"100 —Å–ø–∞—Å–∏–±–æ–∫ = 1000 –±–æ–Ω—É—Å–æ–≤"}),e.jsx("p",{children:"1000 —Å–ø–∞—Å–∏–±–æ–∫ = 10000 –±–æ–Ω—É—Å–æ–≤"})]}),e.jsx("button",{type:"submit",disabled:h,className:s.buttonGreen,children:h?"–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ...":"–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏"})]})]})},be={name:"",description:"",price_rub:"",original_price_rub:"",stock:1,image_url:"",is_auto_issuance:!1,is_shared_gift:!1,is_local_purchase:!1,codes_text:"",added_stock:"",new_item_codes:""},ws=()=>{const{showAlert:t}=V(),{confirm:l}=Y(),[i,h]=r.useState("active"),[o,g]=r.useState([]),[d,p]=r.useState([]),[n,C]=r.useState(be),[b,y]=r.useState(null),[x,j]=r.useState(!1),c=async()=>{j(!0);try{const[a,m]=await Promise.all([ut(),pt()]);g(a.data),p(m.data)}catch{t("–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å —Ç–æ–≤–∞—Ä—ã.","error")}finally{j(!1)}};r.useEffect(()=>{c()},[]);const u=r.useMemo(()=>!n.price_rub||n.price_rub<=0?0:Math.round(n.price_rub/30),[n.price_rub]),v=r.useMemo(()=>!n.original_price_rub||n.original_price_rub<=0?0:Math.round(n.original_price_rub/30),[n.original_price_rub]),k=r.useMemo(()=>{if(!u||u<=0)return"-";const a=u/50;return a<=1?"–æ–∫–æ–ª–æ 1 –º–µ—Å—è—Ü–∞":a<=18?`–æ–∫–æ–ª–æ ${Math.round(a)} –º–µ—Å.`:`–æ–∫–æ–ª–æ ${(a/12).toFixed(1)} –ª–µ—Ç`},[u]),_=a=>{const{name:m,value:L,type:$,checked:E}=a.target;C(m==="is_shared_gift"&&E?S=>({...S,[m]:E,is_auto_issuance:!1,is_local_purchase:!1}):m==="is_auto_issuance"&&E?S=>({...S,[m]:E,is_shared_gift:!1,is_local_purchase:!1}):m==="is_local_purchase"&&E?S=>({...S,[m]:E,is_auto_issuance:!1,is_shared_gift:!1}):S=>({...S,[m]:$==="checkbox"?E:L}))},I=async a=>{var $,E;a.preventDefault(),j(!0);const m=!!b;let L;try{if(m){const S=n.is_auto_issuance?n.new_item_codes.split(`
`).filter(Boolean):[];L={name:n.name,description:n.description,price:u,price_rub:parseInt(n.price_rub,10),image_url:n.image_url,original_price:v>0?v:null,is_shared_gift:n.is_shared_gift,is_local_purchase:n.is_local_purchase,added_stock:n.is_auto_issuance?0:parseInt(n.added_stock,10)||0,new_item_codes:S},await ht(b,L),t("–¢–æ–≤–∞—Ä —É—Å–ø–µ—à–Ω–æ –æ–±–Ω–æ–≤–ª–µ–Ω!","success")}else{const S=n.is_auto_issuance?n.codes_text.split(`
`).filter(Boolean):[];if(n.is_auto_issuance&&S.length===0){t("–î–ª—è —Ç–æ–≤–∞—Ä–æ–≤ —Å –∞–≤—Ç–æ–≤—ã–¥–∞—á–µ–π –¥–æ–±–∞–≤—å—Ç–µ —Ö–æ—Ç—è –±—ã –æ–¥–∏–Ω –∫–æ–¥.","error"),j(!1);return}L={name:n.name,description:n.description,price:u,price_rub:parseInt(n.price_rub,10),stock:n.is_auto_issuance?S.length:parseInt(n.stock,10),image_url:n.image_url,original_price:v>0?v:null,is_auto_issuance:n.is_auto_issuance,is_shared_gift:n.is_shared_gift,is_local_purchase:n.is_local_purchase,item_codes:S},await mt(L),t("–¢–æ–≤–∞—Ä —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω!","success")}M(),c(),ne("market")}catch(S){t(((E=($=S.response)==null?void 0:$.data)==null?void 0:E.detail)||"–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞.","error")}finally{j(!1)}},B=a=>{y(a.id),C({name:a.name,description:a.description||"",price_rub:a.price_rub,original_price_rub:a.original_price?a.original_price*30:"",stock:a.stock,image_url:a.image_url||"",is_auto_issuance:a.is_auto_issuance,is_shared_gift:a.is_shared_gift||!1,is_local_purchase:a.is_local_purchase||!1,codes_text:a.codes?a.codes.map(m=>m.code_value).join(`
`):"",added_stock:"",new_item_codes:""}),window.scrollTo(0,0)},M=()=>{C(be),y(null)},f=async a=>{if(await l("–ê—Ä—Ö–∏–≤–∞—Ü–∏—è","–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ –∞—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞—Ç—å —ç—Ç–æ—Ç —Ç–æ–≤–∞—Ä?"))try{await xt(a),t("–¢–æ–≤–∞—Ä –∞—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞–Ω.","success"),c(),ne("market")}catch{t("–û—à–∏–±–∫–∞ –∞—Ä—Ö–∏–≤–∞—Ü–∏–∏.","error")}},P=async a=>{if(await l("–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ","–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —ç—Ç–æ—Ç —Ç–æ–≤–∞—Ä?"))try{await _t(a),t("–¢–æ–≤–∞—Ä –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω.","success"),c(),ne("market")}catch{t("–û—à–∏–±–∫–∞ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è.","error")}},w=async(a,m)=>{if(await l("–ü–û–õ–ù–û–ï –£–î–ê–õ–ï–ù–ò–ï",`–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ –ù–ê–í–°–ï–ì–î–ê —É–¥–∞–ª–∏—Ç—å —Ç–æ–≤–∞—Ä "${m}"? –≠—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ –Ω–µ–æ–±—Ä–∞—Ç–∏–º–æ.`)){j(!0);try{await gt(a),t("–¢–æ–≤–∞—Ä —É–¥–∞–ª–µ–Ω –Ω–∞–≤—Å–µ–≥–¥–∞.","success"),c(),ne("market")}catch{t("–û—à–∏–±–∫–∞ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏.","error")}finally{j(!1)}}};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:s.card,children:[e.jsx("h2",{children:b?"–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞":"–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π —Ç–æ–≤–∞—Ä"}),e.jsxs("form",{onSubmit:I,children:[e.jsx("div",{className:s.imageUploader,children:n.image_url?e.jsx("img",{src:n.image_url,alt:"–ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä",className:s.imagePreview,onError:a=>{a.target.style.display="none"},onLoad:a=>{a.target.style.display="block"}}):e.jsx("div",{className:s.imagePlaceholder,children:"–§–æ—Ç–æ"})}),e.jsx("input",{type:"text",name:"image_url",value:n.image_url,onChange:_,placeholder:"–°—Å—ã–ª–∫–∞ –Ω–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ (URL) 1080—Ö720px",className:s.input}),e.jsx("input",{type:"text",name:"name",value:n.name,onChange:_,placeholder:"–ù–∞–∑–≤–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞",className:s.input,required:!0}),e.jsxs("div",{className:s.descriptionWrapper,children:[e.jsx("textarea",{name:"description",placeholder:"–û–ø–∏—Å–∞–Ω–∏–µ",value:n.description,onChange:_,maxLength:"120",className:s.textarea}),e.jsxs("span",{className:s.charCounter,children:[(n.description||"").length," / 120"]})]}),e.jsx("input",{type:"number",name:"price_rub",value:n.price_rub,onChange:_,placeholder:"–¶–µ–Ω–∞ –≤ —Ä—É–±–ª—è—Ö",className:s.input,required:!0,min:"0"}),e.jsx("input",{type:"number",name:"original_price_rub",value:n.original_price_rub,onChange:_,placeholder:"–°—Ç–∞—Ä–∞—è —Ü–µ–Ω–∞ –≤ —Ä—É–±–ª—è—Ö (–¥–ª—è —Å–∫–∏–¥–∫–∏)",className:s.input,min:"0"}),(n.price_rub>0||n.original_price_rub>0)&&e.jsxs("div",{className:s.pricePreview,children:[e.jsxs("p",{children:["–¶–µ–Ω–∞ –≤ —Å–ø–∞—Å–∏–±–∫–∞—Ö: ",e.jsx("strong",{children:u})]}),v>0&&e.jsxs("p",{children:["–°—Ç–∞—Ä–∞—è —Ü–µ–Ω–∞ –≤ —Å–ø–∞—Å–∏–±–∫–∞—Ö: ",e.jsx("strong",{children:v})]}),e.jsxs("p",{children:["–ü—Ä–æ–≥–Ω–æ–∑ –Ω–∞–∫–æ–ø–ª–µ–Ω–∏—è",e.jsx("span",{style:{color:"#5CA14A",fontWeight:"500"},children:v>0?" (–ø–æ —Å–∫–∏–¥–∫–µ)":""}),":",e.jsxs("strong",{children:[" ",k]})]})]}),e.jsxs("div",{className:s.checkboxContainer,children:[e.jsx("input",{type:"checkbox",id:"is_auto_issuance",name:"is_auto_issuance",checked:n.is_auto_issuance,onChange:_,disabled:!!b||n.is_shared_gift||n.is_local_purchase}),e.jsx("label",{htmlFor:"is_auto_issuance",children:"–ê–≤—Ç–æ–≤—ã–¥–∞—á–∞ —Ç–æ–≤–∞—Ä–∞ (—Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã, –∫–æ–¥—ã)"})]}),e.jsxs("div",{className:s.checkboxContainer,children:[e.jsx("input",{type:"checkbox",id:"is_shared_gift",name:"is_shared_gift",checked:n.is_shared_gift,onChange:_,disabled:!!b||n.is_auto_issuance||n.is_local_purchase}),e.jsx("label",{htmlFor:"is_shared_gift",children:"–°–æ–≤–º–µ—Å—Ç–Ω—ã–π –ø–æ–¥–∞—Ä–æ–∫"})]}),e.jsxs("div",{className:s.checkboxContainer,children:[e.jsx("input",{type:"checkbox",id:"is_local_purchase",name:"is_local_purchase",checked:n.is_local_purchase,onChange:_,disabled:!!b||n.is_auto_issuance||n.is_shared_gift}),e.jsx("label",{htmlFor:"is_local_purchase",children:"–õ–æ–∫–∞–ª—å–Ω—ã–π –ø–æ–¥–∞—Ä–æ–∫"})]}),n.is_auto_issuance?e.jsxs(e.Fragment,{children:[b?e.jsx("textarea",{name:"new_item_codes",value:n.new_item_codes,onChange:_,placeholder:"–î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–µ –∫–æ–¥—ã/—Å—Å—ã–ª–∫–∏ (–∫–∞–∂–¥—ã–π —Å –Ω–æ–≤–æ–π —Å—Ç—Ä–æ–∫–∏)",className:s.textarea,rows:4}):e.jsx("textarea",{name:"codes_text",value:n.codes_text,onChange:_,placeholder:"–í—Å—Ç–∞–≤—å—Ç–µ —Å—é–¥–∞ –∫–æ–¥—ã –∏–ª–∏ —Å—Å—ã–ª–∫–∏. –ö–∞–∂–¥—ã–π –∫–æ–¥ —Å –Ω–æ–≤–æ–π —Å—Ç—Ä–æ–∫–∏.",className:s.textarea,rows:5}),e.jsxs("div",{className:s.pricePreview,children:[e.jsxs("p",{children:["–¢–µ–∫—É—â–∏–π –æ—Å—Ç–∞—Ç–æ–∫: ",e.jsx("strong",{children:b?n.stock:"..."})]}),e.jsxs("p",{children:["–ë—É–¥–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω–æ: ",e.jsx("strong",{children:(b?n.new_item_codes:n.codes_text).split(`
`).filter(Boolean).length})]})]})]}):e.jsx(e.Fragment,{children:b?e.jsx("input",{type:"number",name:"added_stock",value:n.added_stock,onChange:_,placeholder:`–¢–µ–∫—É—â–∏–π –æ—Å—Ç–∞—Ç–æ–∫: ${n.stock}. –î–æ–±–∞–≤–∏—Ç—å –µ—â–µ:`,className:s.input,min:"0"}):e.jsx("input",{type:"number",name:"stock",value:n.stock,onChange:_,placeholder:"–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–∞ —Å–∫–ª–∞–¥–µ",className:s.input,required:!0,min:"0"})}),e.jsx("button",{type:"submit",disabled:x,className:s.buttonGreen,children:b?"–°–æ—Ö—Ä–∞–Ω–∏—Ç—å":"–°–æ–∑–¥–∞—Ç—å"}),b&&e.jsx("button",{type:"button",onClick:M,className:s.buttonGrey,children:"–û—Ç–º–µ–Ω–∞"})]})]}),e.jsxs("div",{className:s.tabs,children:[e.jsxs("button",{onClick:()=>h("active"),className:i==="active"?s.tabActive:s.tab,children:["–ê–∫—Ç–∏–≤–Ω—ã–µ (",o.length,")"]}),e.jsxs("button",{onClick:()=>h("archived"),className:i==="archived"?s.tabActive:s.tab,children:["–ê—Ä—Ö–∏–≤ (",d.length,")"]})]}),e.jsxs("div",{className:s.card,children:[e.jsx("h2",{children:i==="active"?"–ê–∫—Ç–∏–≤–Ω—ã–µ —Ç–æ–≤–∞—Ä—ã":"–ê—Ä—Ö–∏–≤ —Ç–æ–≤–∞—Ä–æ–≤"}),e.jsx("div",{className:s.list,children:(i==="active"?o:d).map(a=>e.jsxs("div",{className:s.listItem,children:[a.image_url&&e.jsx("img",{src:a.image_url,alt:a.name,className:s.listItemImage,loading:"lazy"}),e.jsxs("div",{className:s.listItemContent,children:[e.jsx("p",{children:e.jsx("strong",{children:a.name})}),a.is_auto_issuance&&e.jsx("p",{style:{color:"#007bff",fontSize:"12px",fontWeight:"bold"},children:"–ê–≤—Ç–æ–≤—ã–¥–∞—á–∞"}),a.is_shared_gift&&e.jsx("p",{style:{color:"#28a745",fontSize:"12px",fontWeight:"bold"},children:"–°–æ–≤–º–µ—Å—Ç–Ω—ã–π –ø–æ–¥–∞—Ä–æ–∫"}),a.is_local_purchase&&e.jsx("p",{style:{color:"#ff9800",fontSize:"12px",fontWeight:"bold"},children:"–õ–æ–∫–∞–ª—å–Ω—ã–π –ø–æ–¥–∞—Ä–æ–∫"}),a.original_price&&a.original_price>a.price?e.jsxs("p",{children:["–¶–µ–Ω–∞: ",a.price," (–±—ã–ª–æ ",e.jsx("s",{style:{color:"#999"},children:a.original_price}),") —Å–ø–∞—Å–∏–±–æ–∫"]}):e.jsxs("p",{children:["–¶–µ–Ω–∞: ",a.price," —Å–ø–∞—Å–∏–±–æ–∫ (",a.price_rub," ‚ÇΩ)"]}),e.jsxs("p",{children:["–û—Å—Ç–∞—Ç–æ–∫: ",a.stock," —à—Ç."]})]}),e.jsx("div",{className:s.listItemActions,children:i==="active"?e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>B(a),className:s.buttonSmall,children:"‚úèÔ∏è"}),e.jsx("button",{onClick:()=>f(a.id),className:s.buttonSmallRed,children:"üóëÔ∏è"})]}):e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>P(a.id),className:s.restoreButton,children:[e.jsx(Ge,{}),"–í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å"]}),e.jsxs("button",{onClick:()=>w(a.id,a.name),className:s.buttonSmallRed,children:[e.jsx(Ne,{})," –£–¥–∞–ª–∏—Ç—å"]})]})})]},a.id))})]})]})},Ss="_itemManagerContainer_um6nq_3",ks="_tabsContainer_um6nq_8",Bs="_tab_um6nq_8",Is="_tabCollapsed_um6nq_31",Ls="_tabActive_um6nq_37",As="_tabIcon_um6nq_45",Ps="_tabLabel_um6nq_50",$s="_content_um6nq_68",H={itemManagerContainer:Ss,tabsContainer:ks,tab:Bs,tabCollapsed:Is,tabActive:Ls,tabIcon:As,tabLabel:Ps,content:$s},Ds=()=>{const[t,l]=r.useState("statix"),i=[{id:"statix",label:"–ù–∞—Å—Ç—Ä–æ–π–∫–∏ Statix Bonus",icon:e.jsx(de,{})},{id:"creation",label:"–°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —Ç–æ–≤–∞—Ä–∞",icon:e.jsx(ze,{})}],h=()=>{switch(t){case"statix":return e.jsx(fe,{});case"creation":return e.jsx(ws,{});default:return e.jsx(fe,{})}};return e.jsxs("div",{className:H.itemManagerContainer,children:[e.jsx("div",{className:H.tabsContainer,children:i.map(o=>e.jsxs("button",{className:`${H.tab} ${t===o.id?H.tabActive:H.tabCollapsed}`,onClick:()=>l(o.id),children:[e.jsx("span",{className:H.tabIcon,children:o.icon}),e.jsx("span",{className:H.tabLabel,children:o.label})]},o.id))}),e.jsx("div",{className:H.content,children:h()})]})},Es="_userList_1tjgg_3",Fs="_userItem_1tjgg_9",Ts="_userInfo_1tjgg_20",Us="_userStats_1tjgg_37",Ms="_userActions_1tjgg_45",Rs="_iconButton_1tjgg_50",Gs="_modalBackdrop_1tjgg_58",zs="_modalContent_1tjgg_75",qs="_closeButton_1tjgg_86",Ws="_formGrid_1tjgg_97",Vs="_modalActions_1tjgg_105",Os="_modalButton_1tjgg_113",Hs="_buttonRed_1tjgg_128",Ys="_buttonYellow_1tjgg_132",Qs="_header_1tjgg_145",Js="_exportButton_1tjgg_152",D={userList:Es,userItem:Fs,userInfo:Ts,userStats:Us,userActions:Ms,iconButton:Rs,modalBackdrop:Gs,modalContent:zs,closeButton:qs,formGrid:Ws,modalActions:Vs,modalButton:Os,buttonRed:Hs,buttonYellow:Ys,header:Qs,exportButton:Js};function Ks({user:t,onClose:l,onSave:i,onDelete:h,onChangePassword:o,onDeletePassword:g}){const{confirm:d}=Y(),{showAlert:p}=V(),[n,C]=r.useState({...t,date_of_birth:ce(t.date_of_birth),login:t.login||"",password:"",browser_auth_enabled:t.browser_auth_enabled||!1}),[b,y]=r.useState(""),[x,j]=r.useState(!1),c=B=>{const{name:M,value:f,type:P,checked:w}=B.target;C(a=>({...a,[M]:P==="checkbox"?w:f}))},u=B=>{B.preventDefault(),i(t.id,n)},v=async()=>{await d("–ê–Ω–æ–Ω–∏–º–∏–∑–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è",`–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ –∞–Ω–æ–Ω–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è ${t.first_name}? –ï–≥–æ –ª–∏—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –±—É–¥—É—Ç —Å—Ç–µ—Ä—Ç—ã, –Ω–æ –∏—Å—Ç–æ—Ä–∏—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –æ—Å—Ç–∞–Ω–µ—Ç—Å—è. –≠—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ –Ω–µ–æ–±—Ä–∞—Ç–∏–º–æ.`)&&h(t.id)},k=async()=>{const B=t.status==="blocked"?"approved":"blocked";await d("–ò–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞",`–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ ${B==="blocked"?"—Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å":"–∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å"} –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è ${t.first_name}?`)&&i(t.id,{...n,status:B})},_=async()=>{if(!b||b.length<6){p("–ü–∞—Ä–æ–ª—å –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å –º–∏–Ω–∏–º—É–º 6 —Å–∏–º–≤–æ–ª–æ–≤","error");return}await d("–ò–∑–º–µ–Ω–µ–Ω–∏–µ –ø–∞—Ä–æ–ª—è",`–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ –∏–∑–º–µ–Ω–∏—Ç—å –ø–∞—Ä–æ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è ${t.first_name}?`)&&(o(t.id,b),y(""),j(!1))},I=async()=>{await d("–£–¥–∞–ª–µ–Ω–∏–µ –ø–∞—Ä–æ–ª—è",`–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å –ø–∞—Ä–æ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è ${t.first_name}? –í—Ö–æ–¥ —á–µ—Ä–µ–∑ –±—Ä–∞—É–∑–µ—Ä –±—É–¥–µ—Ç –æ—Ç–∫–ª—é—á–µ–Ω.`)&&g(t.id)};return e.jsx("div",{className:D.modalBackdrop,onClick:l,children:e.jsxs("div",{className:D.modalContent,onClick:B=>B.stopPropagation(),children:[e.jsx("button",{onClick:l,className:D.closeButton,children:e.jsx(Se,{})}),e.jsxs("h2",{children:["–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ: ",t.first_name," ",t.last_name]}),e.jsxs("form",{onSubmit:u,children:[e.jsxs("div",{className:D.formGrid,children:[e.jsx("input",{name:"first_name",value:n.first_name||"",onChange:c,placeholder:"–ò–º—è",className:s.input}),e.jsx("input",{name:"last_name",value:n.last_name||"",onChange:c,placeholder:"–§–∞–º–∏–ª–∏—è",className:s.input}),e.jsx("input",{name:"department",value:n.department||"",onChange:c,placeholder:"–ü–æ–¥—Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ",className:s.input}),e.jsx("input",{name:"position",value:n.position||"",onChange:c,placeholder:"–î–æ–ª–∂–Ω–æ—Å—Ç—å",className:s.input}),e.jsx("input",{type:"tel",name:"phone_number",value:n.phone_number||"",onChange:c,placeholder:"–ù–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞",className:s.input}),e.jsx("input",{type:"text",name:"date_of_birth",value:n.date_of_birth||"",onChange:c,placeholder:"–î–∞—Ç–∞ (–î–î.–ú–ú.–ì–ì–ì–ì)",className:s.input}),e.jsx("input",{type:"number",name:"balance",value:n.balance||0,onChange:c,placeholder:"–ë–∞–ª–∞–Ω—Å",className:s.input}),e.jsx("input",{type:"number",name:"tickets",value:n.tickets||0,onChange:c,placeholder:"–ë–∏–ª–µ—Ç—ã",className:s.input}),e.jsx("input",{type:"number",name:"ticket_parts",value:n.ticket_parts||0,onChange:c,placeholder:"–ß–∞—Å—Ç–∏ –±–∏–ª–µ—Ç–æ–≤",className:s.input}),e.jsxs("select",{name:"status",value:n.status,onChange:c,className:s.select,children:[e.jsx("option",{value:"approved",children:"–ê–∫—Ç–∏–≤–µ–Ω"}),e.jsx("option",{value:"blocked",children:"–ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω"})]}),e.jsx("div",{style:{gridColumn:"1 / -1",borderTop:"2px solid #ddd",marginTop:"10px",paddingTop:"15px"},children:e.jsx("h3",{style:{marginTop:0,marginBottom:"15px",fontSize:"16px",color:"#666"},children:"–£—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è –≤—Ö–æ–¥–∞ —á–µ—Ä–µ–∑ –±—Ä–∞—É–∑–µ—Ä"})}),e.jsx("input",{type:"text",name:"login",value:n.login||"",onChange:c,placeholder:"–õ–æ–≥–∏–Ω (–º–∏–Ω–∏–º—É–º 3 —Å–∏–º–≤–æ–ª–∞)",className:s.input,minLength:3}),e.jsx("input",{type:"password",name:"password",value:n.password||"",onChange:c,placeholder:"–ü–∞—Ä–æ–ª—å (–º–∏–Ω–∏–º—É–º 6 —Å–∏–º–≤–æ–ª–æ–≤, –æ—Å—Ç–∞–≤—å—Ç–µ –ø—É—Å—Ç—ã–º —á—Ç–æ–±—ã –Ω–µ –º–µ–Ω—è—Ç—å)",className:s.input,minLength:6}),e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"10px",cursor:"pointer",gridColumn:"1 / -1"},children:[e.jsx("input",{type:"checkbox",name:"browser_auth_enabled",checked:n.browser_auth_enabled||!1,onChange:c,style:{width:"18px",height:"18px",cursor:"pointer"}}),e.jsx("span",{children:"–í–∫–ª—é—á–∏—Ç—å –≤—Ö–æ–¥ —á–µ—Ä–µ–∑ –±—Ä–∞—É–∑–µ—Ä (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤–∫–ª—é—á–∞–µ—Ç—Å—è –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ –ª–æ–≥–∏–Ω–∞ –∏ –ø–∞—Ä–æ–ª—è)"})]}),n.login&&e.jsxs("div",{style:{gridColumn:"1 / -1",fontSize:"12px",color:"#666",fontStyle:"italic"},children:["üí° –¢–µ–∫—É—â–∏–π –ª–æ–≥–∏–Ω: ",e.jsx("strong",{children:n.login})]}),t.password_plain&&e.jsxs("div",{style:{gridColumn:"1 / -1",fontSize:"12px",color:"#666",fontStyle:"italic",marginTop:"5px"},children:["üîë –¢–µ–∫—É—â–∏–π –ø–∞—Ä–æ–ª—å: ",e.jsx("strong",{style:{fontFamily:"monospace",backgroundColor:"#f0f0f0",padding:"2px 6px",borderRadius:"3px"},children:t.password_plain})]}),!t.password_plain&&t.login&&e.jsx("div",{style:{gridColumn:"1 / -1",fontSize:"12px",color:"#999",fontStyle:"italic",marginTop:"5px"},children:"‚ö†Ô∏è –ü–∞—Ä–æ–ª—å –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω"}),e.jsxs("div",{style:{gridColumn:"1 / -1",display:"flex",gap:"10px",marginTop:"10px"},children:[e.jsxs("button",{type:"button",onClick:()=>j(!x),className:`${D.modalButton} ${s.buttonGreen}`,style:{flex:1},children:[e.jsx(ke,{})," ",x?"–û—Ç–º–µ–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏–µ":"–ò–∑–º–µ–Ω–∏—Ç—å –ø–∞—Ä–æ–ª—å"]}),t.password_plain&&e.jsxs("button",{type:"button",onClick:I,className:`${D.modalButton} ${D.buttonRed}`,style:{flex:1},children:[e.jsx(Ne,{})," –£–¥–∞–ª–∏—Ç—å –ø–∞—Ä–æ–ª—å"]})]}),x&&e.jsxs("div",{style:{gridColumn:"1 / -1",display:"flex",gap:"10px",alignItems:"center",marginTop:"10px"},children:[e.jsx("input",{type:"password",value:b,onChange:B=>y(B.target.value),placeholder:"–ù–æ–≤—ã–π –ø–∞—Ä–æ–ª—å (–º–∏–Ω–∏–º—É–º 6 —Å–∏–º–≤–æ–ª–æ–≤)",className:s.input,style:{flex:1},minLength:6}),e.jsx("button",{type:"button",onClick:_,className:`${D.modalButton} ${s.buttonGreen}`,children:"–°–æ—Ö—Ä–∞–Ω–∏—Ç—å"})]})]}),e.jsxs("div",{className:D.modalActions,children:[e.jsx("button",{type:"submit",className:`${D.modalButton} ${s.buttonGreen}`,children:"–°–æ—Ö—Ä–∞–Ω–∏—Ç—å"}),e.jsx("button",{type:"button",onClick:k,className:`${D.modalButton} ${D.buttonYellow}`,children:t.status==="blocked"?"–†–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å":"–ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å"}),e.jsx("button",{type:"button",onClick:v,className:`${D.modalButton} ${D.buttonRed}`,children:"–£–¥–∞–ª–∏—Ç—å"}),e.jsx("button",{type:"button",onClick:l,className:`${D.modalButton} ${s.buttonGrey}`,children:"–û—Ç–º–µ–Ω–∞"})]})]})]})})}function Xs(){const{showAlert:t}=V(),[l,i]=r.useState([]),[h,o]=r.useState("active"),[g,d]=r.useState(""),[p,n]=r.useState(null),[C,b]=r.useState(!0),[y,x]=r.useState(""),[j,c]=r.useState(!1);r.useEffect(()=>{u()},[]);const u=async()=>{b(!0);try{const P=(await ie()).data.filter(w=>w&&w.id&&w.status!=="deleted");i(P)}catch{t("–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.","error")}finally{b(!1)}},v=async(f,P)=>{var L,$;const w=P.date_of_birth.split(".");let a=null;w.length===3&&(a=`${w[2]}-${w[1]}-${w[0]}`);const m={...P,date_of_birth:a};(!m.password||m.password.trim()==="")&&delete m.password;try{m.action==="delete"?(await je(f),t("–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É—Å–ø–µ—à–Ω–æ —Å–±—Ä–æ—à–µ–Ω.","success")):(await bt(f,m),t("–î–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω—ã.","success")),n(null),u()}catch(E){const S=(($=(L=E.response)==null?void 0:L.data)==null?void 0:$.detail)||"–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏.";t(S,"error")}},k=async f=>{var P,w;try{await je(f),t("–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É—Å–ø–µ—à–Ω–æ –∞–Ω–æ–Ω–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω.","success"),n(null),u()}catch(a){t(((w=(P=a.response)==null?void 0:P.data)==null?void 0:w.detail)||"–û—à–∏–±–∫–∞ –ø—Ä–∏ –∞–Ω–æ–Ω–∏–º–∏–∑–∞—Ü–∏–∏.","error")}},_=async(f,P)=>{var w,a;try{if(await ft(f,P),t("–ü–∞—Ä–æ–ª—å —É—Å–ø–µ—à–Ω–æ –∏–∑–º–µ–Ω–µ–Ω.","success"),u(),p&&p.id===f){const L=(await ie()).data.find($=>$.id===f);L&&n(L)}}catch(m){t(((a=(w=m.response)==null?void 0:w.data)==null?void 0:a.detail)||"–û—à–∏–±–∫–∞ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –ø–∞—Ä–æ–ª—è.","error")}},I=async f=>{var P,w;try{if(await jt(f),t("–ü–∞—Ä–æ–ª—å —É—Å–ø–µ—à–Ω–æ —É–¥–∞–ª–µ–Ω. –í—Ö–æ–¥ —á–µ—Ä–µ–∑ –±—Ä–∞—É–∑–µ—Ä –æ—Ç–∫–ª—é—á–µ–Ω.","success"),u(),p&&p.id===f){const m=(await ie()).data.find(L=>L.id===f);m&&n(m)}}catch(a){t(((w=(P=a.response)==null?void 0:P.data)==null?void 0:w.detail)||"–û—à–∏–±–∫–∞ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –ø–∞—Ä–æ–ª—è.","error")}},B=r.useMemo(()=>{const f=h==="blocked"?"blocked":"approved";let P=l.filter(w=>w.status===f);if(g.length>1){const w=g.toLowerCase();P=P.filter(a=>{var m,L,$;return((m=a.first_name)==null?void 0:m.toLowerCase().includes(w))||((L=a.last_name)==null?void 0:L.toLowerCase().includes(w))||(($=a.username)==null?void 0:$.toLowerCase().includes(w))})}return P},[l,h,g]),M=async()=>{c(!0);try{const f=await yt(),P=window.URL.createObjectURL(new Blob([f.data])),w=document.createElement("a");w.href=P,w.setAttribute("download",`all_users_${new Date().toISOString().slice(0,10)}.xlsx`),document.body.appendChild(w),w.click(),w.parentNode.removeChild(w)}catch{t("–ù–µ —É–¥–∞–ª–æ—Å—å —Å–∫–∞—á–∞—Ç—å –æ—Ç—á–µ—Ç.","error")}finally{c(!1)}};return C?e.jsx("p",{children:"–ó–∞–≥—Ä—É–∑–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π..."}):e.jsxs(e.Fragment,{children:[p&&e.jsx(Ks,{user:p,onClose:()=>n(null),onSave:v,onDelete:k,onChangePassword:_,onDeletePassword:I}),e.jsxs("div",{className:D.header,children:[e.jsx("h2",{children:"–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏"}),e.jsxs("button",{className:D.exportButton,onClick:M,disabled:j,children:[e.jsx(we,{}),j?"–≠–∫—Å–ø–æ—Ä—Ç...":"–°–∫–∞—á–∞—Ç—å —Å–ø–∏—Å–æ–∫"]})]}),e.jsxs("div",{className:s.card,children:[e.jsx("h2",{children:"–ü–æ–∏—Å–∫ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤"}),e.jsx("input",{type:"text",value:g,onChange:f=>d(f.target.value),placeholder:"–ù–∞—á–Ω–∏—Ç–µ –≤–≤–æ–¥–∏—Ç—å...",className:s.input})]}),e.jsxs("div",{className:s.tabs,children:[e.jsx("button",{onClick:()=>o("active"),className:h==="active"?s.tabActive:s.tab,children:"–ê–∫—Ç–∏–≤–Ω—ã–µ"}),e.jsx("button",{onClick:()=>o("blocked"),className:h==="blocked"?s.tabActive:s.tab,children:"–ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ"})]}),e.jsxs("div",{className:s.card,children:[y&&e.jsx("p",{className:s.message,children:y}),e.jsx("div",{className:D.userList,children:B.map(f=>e.jsxs("div",{className:D.userItem,children:[e.jsxs("div",{className:D.userInfo,children:[e.jsxs("strong",{children:[f.first_name," ",f.last_name]}),e.jsxs("span",{children:["@",f.username||"..."," | ",f.position]}),f.login&&e.jsxs("span",{style:{fontSize:"12px",color:"#888",marginTop:"4px"},children:["–õ–æ–≥–∏–Ω: ",e.jsx("strong",{children:f.login}),f.password_plain&&e.jsxs(e.Fragment,{children:[" | –ü–∞—Ä–æ–ª—å: ",e.jsx("strong",{style:{fontFamily:"monospace"},children:f.password_plain})]}),!f.password_plain&&f.login&&e.jsxs(e.Fragment,{children:[" | ",e.jsx("span",{style:{color:"#e74c3c"},children:"–ü–∞—Ä–æ–ª—å –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω"})]})]})]}),e.jsxs("div",{className:D.userStats,children:[e.jsxs("span",{children:["–°–ø–∞—Å–∏–±–æ–∫: ",f.balance]}),e.jsxs("span",{children:["–ë–∏–ª–µ—Ç–æ–≤: ",f.tickets," (",f.ticket_parts,"/2)"]})]}),e.jsx("div",{className:D.userActions,children:e.jsx("button",{onClick:()=>n(f),className:`${s.buttonSmall} ${D.iconButton}`,children:e.jsx(qe,{})})})]},f.id))})]})]})}const Zs="_statsContainer_9a28h_3",en="_tabsContainer_9a28h_9",tn="_tab_9a28h_9",sn="_tabCollapsed_9a28h_32",nn="_tabActive_9a28h_38",an="_tabIcon_9a28h_46",rn="_tabLabel_9a28h_51",on="_content_9a28h_72",ln="_statsGrid_9a28h_102",cn="_statCard_9a28h_108",dn="_controlsContainer_9a28h_129",un="_consolidatedExportButton_9a28h_137",z={statsContainer:Zs,tabsContainer:en,tab:tn,tabCollapsed:sn,tabActive:nn,tabIcon:an,tabLabel:rn,content:on,statsGrid:ln,statCard:cn,controlsContainer:dn,consolidatedExportButton:un},pn=({startDate:t,setStartDate:l,endDate:i,setEndDate:h})=>e.jsxs("div",{className:"date-picker-container",children:[e.jsx(xe,{selected:t,onChange:o=>l(o),selectsStart:!0,startDate:t,endDate:i,placeholderText:"–ù–∞—á–∞–ª–æ –ø–µ—Ä–∏–æ–¥–∞",className:"date-input",dateFormat:"dd.MM.yyyy",locale:"ru"}),e.jsx(xe,{selected:i,onChange:o=>h(o),selectsEnd:!0,startDate:t,endDate:i,minDate:t,placeholderText:"–ö–æ–Ω–µ—Ü –ø–µ—Ä–∏–æ–¥–∞",className:"date-input",dateFormat:"dd.MM.yyyy",locale:"ru"})]}),Z=({title:t,value:l})=>e.jsxs("div",{className:z.statCard,children:[e.jsx("h4",{children:t}),e.jsx("p",{children:l??0})]}),ye=({startDate:t,endDate:l})=>{const[i,h]=r.useState(null),[o,g]=r.useState(!0);return r.useEffect(()=>{(async()=>{g(!0);try{const p=await vt(t,l);h(p.data)}catch{}finally{g(!1)}})()},[t,l]),o?e.jsx("p",{children:"–ó–∞–≥—Ä—É–∑–∫–∞..."}):e.jsxs("div",{children:[e.jsx("h2",{children:"–û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞"}),e.jsxs("div",{className:z.statsGrid,children:[e.jsx(Z,{title:"–í—Å–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π",value:i==null?void 0:i.new_users_count}),e.jsx(Z,{title:"–ê–∫—Ç–∏–≤–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏",value:i==null?void 0:i.active_users_count}),e.jsx(Z,{title:"–í—Å–µ–≥–æ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π",value:i==null?void 0:i.transactions_count}),e.jsx(Z,{title:"–û–±–æ—Ä–æ—Ç",value:`${(i==null?void 0:i.total_turnover)??0} —Å–ø–∞—Å–∏–±–æ–∫`}),e.jsx(Z,{title:"–ü–æ–∫—É–ø–æ–∫ –≤ –º–∞–≥–∞–∑–∏–Ω–µ",value:i==null?void 0:i.store_purchases_count}),e.jsx(Z,{title:"–ü–æ—Ç—Ä–∞—á–µ–Ω–æ –≤ –º–∞–≥–∞–∑–∏–Ω–µ",value:`${(i==null?void 0:i.total_store_spent)??0} —Å–ø–∞—Å–∏–±–æ–∫`})]})]})};ue.register(Le,Ae,Pe,$e,pe,he);const hn=({startDate:t,endDate:l})=>{const[i,h]=r.useState(null),[o,g]=r.useState(!0),[d,p]=r.useState(null);r.useEffect(()=>{(async()=>{try{g(!0);const y=(await Ct(t,l)).data.hourly_stats,x=Array.from({length:24},(c,u)=>`${u.toString().padStart(2,"0")}:00`),j=x.map((c,u)=>y[u]||0);h({labels:x,datasets:[{label:'–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ "—Å–ø–∞—Å–∏–±–æ"',data:j,backgroundColor:"#5CA14A",borderRadius:5}]})}catch{p("–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –¥–∞–Ω–Ω—ã–µ. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ.")}finally{g(!1)}})()},[t,l]);const n={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},title:{display:!0,text:'–ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –ø–æ "—Å–ø–∞—Å–∏–±–æ" (–ø–æ —á–∞—Å–∞–º)',font:{size:16}}},scales:{y:{beginAtZero:!0,ticks:{precision:0}}}};return o?e.jsx("p",{children:"–ó–∞–≥—Ä—É–∑–∫–∞ –≥—Ä–∞—Ñ–∏–∫–∞..."}):d?e.jsx("p",{style:{color:"red"},children:d}):e.jsxs("div",{children:[e.jsx("h2",{children:'–ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –ø–æ "—Å–ø–∞—Å–∏–±–æ"'}),e.jsx("div",{style:{height:"300px",marginTop:"20px"},children:i&&e.jsx(We,{options:n,data:i})})]})},mn="_container_n8no6_3",xn="_listContainer_n8no6_16",_n="_list_n8no6_16",gn="_listItem_n8no6_35",jn="_userInfo_n8no6_53",fn="_userName_n8no6_57",bn="_userPosition_n8no6_61",yn="_count_n8no6_66",vn="_header_n8no6_72",Cn="_exportButton_n8no6_79",q={container:mn,listContainer:xn,list:_n,listItem:gn,userInfo:jn,userName:fn,userPosition:bn,count:yn,header:vn,exportButton:Cn},ve=({title:t,users:l})=>e.jsxs("div",{className:q.listContainer,children:[e.jsx("h3",{children:t}),e.jsx("ul",{className:q.list,children:l&&l.length>0?l.map(({user:i,count:h})=>e.jsxs("li",{className:q.listItem,children:[e.jsx("div",{className:q.avatarContainer,children:e.jsx(De,{user:i,size:"small"})}),e.jsxs("div",{className:q.userInfo,children:[e.jsx("div",{className:q.userName,children:`${i.first_name} ${i.last_name}`}),e.jsx("div",{className:q.userPosition,children:i.position})]}),e.jsx("div",{className:q.count,children:h})]},i.id)):e.jsx("p",{children:"–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö"})})]}),Nn=()=>{const[t,l]=r.useState(null),[i,h]=r.useState(!0),[o,g]=r.useState(null),[d,p]=r.useState(!1);r.useEffect(()=>{(async()=>{try{h(!0);const b=await Nt();l(b.data)}catch{g("–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –æ –ª–∏–¥–µ—Ä–∞—Ö.")}finally{h(!1)}})()},[]);const n=async()=>{p(!0);try{const C=await wt(),b=window.URL.createObjectURL(new Blob([C.data])),y=document.createElement("a");y.href=b,y.setAttribute("download","leaders_report.xlsx"),document.body.appendChild(y),y.click(),y.parentNode.removeChild(y)}catch{alert("–ù–µ —É–¥–∞–ª–æ—Å—å —Å–∫–∞—á–∞—Ç—å –æ—Ç—á–µ—Ç.")}finally{p(!1)}};return i?e.jsx("p",{children:"–ó–∞–≥—Ä—É–∑–∫–∞ –ª–∏–¥–µ—Ä–æ–≤..."}):o?e.jsx("p",{style:{color:"red"},children:o}):e.jsxs("div",{children:[e.jsxs("div",{className:q.header,children:[e.jsx("h2",{children:"–õ–∏–¥–µ—Ä—ã –≤–æ–≤–ª–µ—á–µ–Ω–Ω–æ—Å—Ç–∏"}),e.jsxs("button",{className:q.exportButton,onClick:n,disabled:d,children:[e.jsx(we,{}),d?"–≠–∫—Å–ø–æ—Ä—Ç...":"–°–∫–∞—á–∞—Ç—å"]})]}),e.jsxs("div",{className:q.container,children:[e.jsx(ve,{title:"–¢–æ–ø-5 –û—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª–µ–π",users:t==null?void 0:t.top_senders}),e.jsx(ve,{title:"–¢–æ–ø-5 –ü–æ–ª—É—á–∞—Ç–µ–ª–µ–π",users:t==null?void 0:t.top_receivers})]})]})},wn="_itemList_15j1y_3",Sn="_itemCard_15j1y_12",kn="_rank_15j1y_22",Bn="_itemImage_15j1y_30",In="_itemInfo_15j1y_40",Ln="_itemName_15j1y_44",An="_itemPrice_15j1y_50",Pn="_purchaseInfo_15j1y_55",$n="_purchaseCount_15j1y_60",Dn="_purchaseLabel_15j1y_66",W={itemList:wn,itemCard:Sn,rank:kn,itemImage:Bn,itemInfo:In,itemName:Ln,itemPrice:An,purchaseInfo:Pn,purchaseCount:$n,purchaseLabel:Dn},En=()=>{const[t,l]=r.useState([]),[i,h]=r.useState(!0),[o,g]=r.useState(null);return r.useEffect(()=>{(async()=>{try{h(!0);const p=await St();l(p.data.items)}catch{g("–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –æ —Ç–æ–≤–∞—Ä–∞—Ö.")}finally{h(!1)}})()},[]),i?e.jsx("p",{children:"–ó–∞–≥—Ä—É–∑–∫–∞ –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤..."}):o?e.jsx("p",{style:{color:"red"},children:o}):e.jsxs("div",{children:[e.jsx("h2",{children:"–ü–æ–ø—É–ª—è—Ä–Ω—ã–µ —Ç–æ–≤–∞—Ä—ã"}),t&&t.length>0?e.jsx("ul",{className:W.itemList,children:t.map(({item:d,purchase_count:p},n)=>e.jsxs("li",{className:W.itemCard,children:[e.jsx("span",{className:W.rank,children:n+1}),e.jsx("img",{src:d.image_url||"https://via.placeholder.com/60/E9EEF2/6E7A85?text=...",alt:d.name,className:W.itemImage,loading:"lazy"}),e.jsxs("div",{className:W.itemInfo,children:[e.jsx("div",{className:W.itemName,children:d.name}),e.jsxs("div",{className:W.itemPrice,children:[d.price," —Å–ø–∞—Å–∏–±–æ–∫"]})]}),e.jsxs("div",{className:W.purchaseInfo,children:[e.jsx("div",{className:W.purchaseCount,children:p}),e.jsx("div",{className:W.purchaseLabel,children:"–ø–æ–∫—É–ø–æ–∫"})]})]},d.id))}):e.jsx("p",{children:"–ü–æ–∫—É–ø–æ–∫ –≤ –º–∞–≥–∞–∑–∏–Ω–µ –µ—â–µ –Ω–µ –±—ã–ª–æ."})]})},Fn="_userList_1x1ci_3",Tn="_userCard_1x1ci_12",Un="_avatarContainer_1x1ci_21",Mn="_userInfo_1x1ci_25",Rn="_userName_1x1ci_29",Gn="_userPosition_1x1ci_33",zn="_noInactiveMessage_1x1ci_39",K={userList:Fn,userCard:Tn,avatarContainer:Un,userInfo:Mn,userName:Rn,userPosition:Gn,noInactiveMessage:zn},qn=()=>{const[t,l]=r.useState([]),[i,h]=r.useState(!0),[o,g]=r.useState(null);return r.useEffect(()=>{(async()=>{try{h(!0);const p=await kt();l(p.data.users)}catch{g("–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å —Å–ø–∏—Å–æ–∫ –Ω–µ–∞–∫—Ç–∏–≤–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.")}finally{h(!1)}})()},[]),i?e.jsx("p",{children:"–ó–∞–≥—Ä—É–∑–∫–∞ —Å–ø–∏—Å–∫–∞..."}):o?e.jsx("p",{style:{color:"red"},children:o}):e.jsxs("div",{children:[e.jsx("h2",{children:"–ù–µ–∞–∫—Ç–∏–≤–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏"}),e.jsx("p",{style:{color:"#6E7A85",marginTop:"-10px",marginBottom:"20px"},children:'–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏, –∫–æ—Ç–æ—Ä—ã–µ –Ω–∏ —Ä–∞–∑—É –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è–ª–∏ –∏ –Ω–µ –ø–æ–ª—É—á–∞–ª–∏ "—Å–ø–∞—Å–∏–±–æ".'}),t&&t.length>0?e.jsx("ul",{className:K.userList,children:t.map(d=>e.jsxs("li",{className:K.userCard,children:[e.jsx("div",{className:K.avatarContainer,children:e.jsx(De,{user:d,size:"medium"})}),e.jsxs("div",{className:K.userInfo,children:[e.jsx("div",{className:K.userName,children:`${d.first_name} ${d.last_name}`}),e.jsx("div",{className:K.userPosition,children:d.position})]})]},d.id))}):e.jsx("div",{className:K.noInactiveMessage,children:"üéâ –û—Ç–ª–∏—á–Ω—ã–µ –Ω–æ–≤–æ—Å—Ç–∏! –í—Å–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –∞–∫—Ç–∏–≤–Ω—ã."})]})},Wn="_card_9c6x6_3",Vn="_value_9c6x6_13",On="_label_9c6x6_19",se={card:Wn,value:Vn,label:On},Hn=()=>{const[t,l]=r.useState(0),[i,h]=r.useState(!0),[o,g]=r.useState(null);r.useEffect(()=>{(async()=>{try{h(!0);const n=await Bt();l(n.data.total_balance)}catch{g("–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –æ –±–∞–ª–∞–Ω—Å–µ.")}finally{h(!1)}})()},[]);const d=p=>(p==null?void 0:p.toString().replace(/\B(?=(\d{3})+(?!\d))/g," "))||"0";return i?e.jsx("p",{children:"–ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö..."}):o?e.jsx("p",{style:{color:"red"},children:o}):e.jsxs("div",{children:[e.jsx("h2",{children:"–ë–∞–ª–∞–Ω—Å —ç–∫–æ–Ω–æ–º–∏–∫–∏"}),e.jsx("p",{style:{color:"#6E7A85",marginTop:"-10px",marginBottom:"20px"},children:'–û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ "—Å–ø–∞—Å–∏–±–æ–∫" –Ω–∞ —Å—á–µ—Ç–∞—Ö –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.'}),e.jsxs("div",{className:se.card,children:[e.jsx("p",{className:se.value,children:d(t)}),e.jsx("p",{className:se.label,children:"—Å–ø–∞—Å–∏–±–æ–∫ –≤ —Å–∏—Å—Ç–µ–º–µ"})]})]})};ue.register(Le,Ae,Pe,$e,pe,he);ue.register(Ht,pe,he);const Yn=()=>{const[t,l]=r.useState(null),[i,h]=r.useState(!0),[o,g]=r.useState(null);r.useEffect(()=>{(async()=>{try{h(!0);const n=await It(),{active_users:C,inactive_users:b}=n.data;l({labels:["–ê–∫—Ç–∏–≤–Ω—ã–µ","–ù–µ–∞–∫—Ç–∏–≤–Ω—ã–µ"],datasets:[{label:"–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏",data:[C,b],backgroundColor:["#5CA14A","#E9EEF2"],borderColor:["#FFFFFF","#FFFFFF"],borderWidth:2}]})}catch{g("–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –¥–∞–Ω–Ω—ã–µ.")}finally{h(!1)}})()},[]);const d={responsive:!0,maintainAspectRatio:!1,cutout:"70%",plugins:{legend:{position:"bottom"},title:{display:!0,text:"–°–æ–æ—Ç–Ω–æ—à–µ–Ω–∏–µ –∞–∫—Ç–∏–≤–Ω—ã—Ö –∏ –Ω–µ–∞–∫—Ç–∏–≤–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π",font:{size:16}}}};return i?e.jsx("p",{children:"–ó–∞–≥—Ä—É–∑–∫–∞ –¥–∏–∞–≥—Ä–∞–º–º—ã..."}):o?e.jsx("p",{style:{color:"red"},children:o}):e.jsxs("div",{children:[e.jsx("h2",{children:"–°–æ–æ—Ç–Ω–æ—à–µ–Ω–∏–µ –ê–∫—Ç–∏–≤–Ω—ã–µ/–ù–µ–∞–∫—Ç–∏–≤–Ω—ã–µ"}),e.jsx("div",{style:{height:"350px",marginTop:"20px",position:"relative"},children:t&&e.jsx(Ve,{options:d,data:t})})]})},Qn=({startDate:t,endDate:l})=>{const[i,h]=r.useState(0),[o,g]=r.useState(!0),[d,p]=r.useState(null);return r.useEffect(()=>{(async()=>{try{g(!0);const C=await Lt(t,l);h(C.data.average_duration_minutes)}catch{p("–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –¥–∞–Ω–Ω—ã–µ.")}finally{g(!1)}})()},[t,l]),o?e.jsx("p",{children:"–ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö..."}):d?e.jsx("p",{style:{color:"red"},children:d}):e.jsxs("div",{children:[e.jsx("h2",{children:"–°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è —Å–µ—Å—Å–∏–∏"}),e.jsx("p",{style:{color:"#6E7A85",marginTop:"-10px",marginBottom:"20px"},children:"–°—Ä–µ–¥–Ω—è—è –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –æ–¥–Ω–æ–≥–æ –≤–∏–∑–∏—Ç–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞ –≤—ã–±—Ä–∞–Ω–Ω—ã–π –ø–µ—Ä–∏–æ–¥."}),e.jsxs("div",{className:se.card,children:[e.jsx("p",{className:se.value,children:i.toFixed(2)}),e.jsx("p",{className:se.label,children:"–º–∏–Ω—É—Ç –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è"})]})]})},Jn=()=>{var j;const[t,l]=r.useState("general"),[i,h]=r.useState(null),[o,g]=r.useState(null),[d,p]=r.useState(!1),n=c=>c?c.toISOString().split("T")[0]:null,C=async()=>{p(!0);try{const c=n(i),u=n(o),v=await At(c,u),k=window.URL.createObjectURL(new Blob([v.data])),_=document.createElement("a");_.href=k,_.setAttribute("download","consolidated_report.xlsx"),document.body.appendChild(_),_.click(),_.parentNode.removeChild(_)}catch{alert("–ù–µ —É–¥–∞–ª–æ—Å—å —Å–∫–∞—á–∞—Ç—å —Å–≤–æ–¥–Ω—ã–π –æ—Ç—á–µ—Ç.")}finally{p(!1)}},b=[{id:"general",label:"–û–±—â–∞—è",icon:e.jsx(He,{}),dateDependent:!0},{id:"duration",label:"–í—Ä–µ–º—è —Å–µ—Å—Å–∏–∏",icon:e.jsx(Ye,{}),dateDependent:!0},{id:"hourly",label:"–°–ø–∞—Å–∏–±–æ",icon:e.jsx(Qe,{}),dateDependent:!0},{id:"ratio",label:"–ê–∫—Ç/–ù–µ–∞–∫—Ç",icon:e.jsx(Je,{}),dateDependent:!1},{id:"engagement",label:"–õ–∏–¥–µ—Ä—ã",icon:e.jsx(Ke,{}),dateDependent:!1},{id:"popular",label:"–¢–æ–≤–∞—Ä—ã",icon:e.jsx(Xe,{}),dateDependent:!1},{id:"inactive",label:"–ù–µ–∞–∫—Ç–∏–≤–Ω—ã–µ",icon:e.jsx(Ze,{}),dateDependent:!1},{id:"economy",label:"–≠–∫–æ–Ω–æ–º–∏–∫–∞",icon:e.jsx(de,{}),dateDependent:!1}],y=()=>{const c={startDate:n(i),endDate:n(o)};switch(t){case"general":return e.jsx(ye,{...c});case"duration":return e.jsx(Qn,{...c});case"hourly":return e.jsx(hn,{...c});case"ratio":return e.jsx(Yn,{});case"engagement":return e.jsx(Nn,{});case"popular":return e.jsx(En,{});case"inactive":return e.jsx(qn,{});case"economy":return e.jsx(Hn,{});default:return e.jsx(ye,{...c})}},x=(j=b.find(c=>c.id===t))==null?void 0:j.dateDependent;return e.jsxs("div",{className:z.statsContainer,children:[e.jsx("div",{className:z.tabsContainer,children:b.map(c=>e.jsxs("button",{className:`${z.tab} ${t===c.id?z.tabActive:z.tabCollapsed}`,onClick:()=>l(c.id),children:[e.jsx("span",{className:z.tabIcon,children:c.icon}),e.jsx("span",{className:z.tabLabel,children:c.label})]},c.id))}),e.jsxs("div",{className:z.controlsContainer,children:[x&&e.jsx(pn,{startDate:i,setStartDate:h,endDate:o,setEndDate:g}),e.jsxs("button",{className:z.consolidatedExportButton,onClick:C,disabled:d,children:[e.jsx(Oe,{}),d?"–§–æ—Ä–º–∏—Ä—É–µ–º –æ—Ç—á–µ—Ç...":"–°–∫–∞—á–∞—Ç—å —Å–≤–æ–¥–Ω—ã–π –æ—Ç—á–µ—Ç"]})]})," ",e.jsx("div",{className:z.content,children:y()})]})},Ce=t=>{if(!t)return"";const l={–∞:"a",–±:"b",–≤:"v",–≥:"g",–¥:"d",–µ:"e",—ë:"yo",–∂:"zh",–∑:"z",–∏:"i",–π:"y",–∫:"k",–ª:"l",–º:"m",–Ω:"n",–æ:"o",–ø:"p",—Ä:"r",—Å:"s",—Ç:"t",—É:"u",—Ñ:"f",—Ö:"h",—Ü:"ts",—á:"ch",—à:"sh",—â:"sch",—ä:"",—ã:"y",—å:"",—ç:"e",—é:"yu",—è:"ya",–ê:"a",–ë:"b",–í:"v",–ì:"g",–î:"d",–ï:"e",–Å:"yo",–ñ:"zh",–ó:"z",–ò:"i",–ô:"y",–ö:"k",–õ:"l",–ú:"m",–ù:"n",–û:"o",–ü:"p",–†:"r",–°:"s",–¢:"t",–£:"u",–§:"f",–•:"h",–¶:"ts",–ß:"ch",–®:"sh",–©:"sch",–™:"",–´:"y",–¨:"",–≠:"e",–Æ:"yu",–Ø:"ya"};let i="";const h=t.toLowerCase();for(let o of h)o in l?i+=l[o]:/[a-z0-9]/.test(o)&&(i+=o);return i},Kn=(t,l)=>{if(!t&&!l)return"";const i=Ce(t||""),h=Ce(l||"");return i&&h?`${i}.${h}`:i||h||""};function Xn(){const{showAlert:t}=V(),{confirm:l}=Y(),[i,h]=r.useState("individual"),[o,g]=r.useState(null),[d,p]=r.useState(""),[n,C]=r.useState([]),[b,y]=r.useState(!1),[x,j]=r.useState(""),[c,u]=r.useState(""),[v,k]=r.useState(null),[_,I]=r.useState(!1),[B,M]=r.useState(!1),[f,P]=r.useState({login:!1,password:!1}),[w,a]=r.useState(""),[m,L]=r.useState(!0),[$,E]=r.useState(!0),[S,R]=r.useState(!1),[X,ae]=r.useState(!1),[Q,re]=r.useState(null),Ee=()=>{const T="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789!@#$%^&*";let G="";for(let O=0;O<12;O++)G+=T.charAt(Math.floor(Math.random()*T.length));u(G)},Fe=async N=>{if(N.length<2){C([]),y(!1);return}M(!0);try{const T=await Pt(N);C(T.data||[]),y(!0)}catch{C([])}finally{M(!1)}};r.useEffect(()=>{const N=setTimeout(()=>{d?Fe(d):(C([]),y(!1))},300);return()=>clearTimeout(N)},[d]);const Te=N=>{if(g(N),p(`${N.first_name||""} ${N.last_name||""}`.trim()),y(!1),C([]),N.first_name||N.last_name){const T=Kn(N.first_name||"",N.last_name||"");T&&j(T)}},Ue=async N=>{var T,G;if(N.preventDefault(),!o){t("–í—ã–±–µ—Ä–∏—Ç–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è","error");return}if(!x||x.length<3){t("–õ–æ–≥–∏–Ω –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å –º–∏–Ω–∏–º—É–º 3 —Å–∏–º–≤–æ–ª–∞","error");return}if(!c||c.length<6){t("–ü–∞—Ä–æ–ª—å –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å –º–∏–Ω–∏–º—É–º 6 —Å–∏–º–≤–æ–ª–æ–≤","error");return}I(!0),k(null);try{const O=await $t(o.id,{login:x.trim(),password:c});k({login:O.data.login,password:c}),t("–£—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ —É—Å–ø–µ—à–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã!","success"),g(null),p(""),j(""),u("")}catch(O){const J=((G=(T=O.response)==null?void 0:T.data)==null?void 0:G.detail)||"–ù–µ —É–¥–∞–ª–æ—Å—å —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —É—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ";t(J,"error")}finally{I(!1)}},Me=async N=>{var G,O;if(N.preventDefault(),!m&&!$){t("–í—ã–±–µ—Ä–∏—Ç–µ —Ö–æ—Ç—è –±—ã –æ–¥–∏–Ω —Ç–∏–ø –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (–∞–∫—Ç–∏–≤–Ω—ã–µ –∏–ª–∏ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ)","error");return}if(await l("–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –º–∞—Å—Å–æ–≤–æ–π —Ä–∞—Å—Å—ã–ª–∫–∏",`–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —É—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –≤—Å–µ–º –≤—ã–±—Ä–∞–Ω–Ω—ã–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º?

–ê–∫—Ç–∏–≤–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏: ${m?"–î–∞":"–ù–µ—Ç"}
–ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏: ${$?"–î–∞":"–ù–µ—Ç"}
–ü–µ—Ä–µ–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ: ${S?"–î–∞":"–ù–µ—Ç"}

–≠—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ –º–æ–∂–µ—Ç –∑–∞–Ω—è—Ç—å –Ω–µ–∫–æ—Ç–æ—Ä–æ–µ –≤—Ä–µ–º—è.`)){ae(!0),re(null);try{const J=await Dt({message:w.trim(),include_active:m,include_blocked:$,regenerate_existing:S});re(J.data),t(`–†–∞—Å—Å—ã–ª–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞! –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–æ: ${J.data.credentials_generated}, –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ: ${J.data.messages_sent}`,"success")}catch(J){const Re=((O=(G=J.response)==null?void 0:G.data)==null?void 0:O.detail)||"–ù–µ —É–¥–∞–ª–æ—Å—å –≤—ã–ø–æ–ª–Ω–∏—Ç—å –º–∞—Å—Å–æ–≤—É—é —Ä–∞—Å—Å—ã–ª–∫—É";t(Re,"error")}finally{ae(!1)}}},me=async(N,T)=>{try{await navigator.clipboard.writeText(N),P(G=>({...G,[T]:!0})),setTimeout(()=>{P(G=>({...G,[T]:!1}))},2e3)}catch{t("–ù–µ —É–¥–∞–ª–æ—Å—å —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞","error")}};return e.jsxs("div",{children:[e.jsx("h2",{children:"–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —É—á–µ—Ç–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤"}),e.jsxs("div",{style:{marginBottom:"20px",display:"flex",gap:"10px"},children:[e.jsx("button",{onClick:()=>{h("individual"),re(null),k(null)},className:i==="individual"?s.buttonGreen:s.buttonGrey,style:{flex:1},children:"–ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞"}),e.jsx("button",{onClick:()=>{h("bulk"),re(null),k(null)},className:i==="bulk"?s.buttonGreen:s.buttonGrey,style:{flex:1},children:"–ú–∞—Å—Å–æ–≤–∞—è —Ä–∞—Å—Å—ã–ª–∫–∞"})]}),i==="individual"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:s.card,children:e.jsxs("form",{onSubmit:Ue,children:[e.jsxs("div",{style:{marginBottom:"20px",position:"relative"},children:[e.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"bold"},children:"–ü–æ–∏—Å–∫ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞:"}),e.jsxs("div",{style:{position:"relative"},children:[e.jsx("input",{type:"text",value:d,onChange:N=>{p(N.target.value),N.target.value||g(null)},placeholder:"–í–≤–µ–¥–∏—Ç–µ –∏–º—è –∏–ª–∏ —Ñ–∞–º–∏–ª–∏—é...",className:s.input,style:{paddingLeft:"40px"}}),e.jsx(et,{style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)",color:"#666"}}),B&&e.jsx("span",{style:{position:"absolute",right:"12px",top:"50%",transform:"translateY(-50%)",fontSize:"12px",color:"#666"},children:"–ü–æ–∏—Å–∫..."})]}),b&&n.length>0&&e.jsx("div",{style:{position:"absolute",top:"100%",left:0,right:0,backgroundColor:"white",border:"1px solid #ddd",borderRadius:"8px",marginTop:"4px",maxHeight:"200px",overflowY:"auto",zIndex:1e3,boxShadow:"0 4px 6px rgba(0,0,0,0.1)"},children:n.map(N=>e.jsx("div",{onClick:()=>Te(N),style:{padding:"12px",cursor:"pointer",borderBottom:"1px solid #eee",display:"flex",alignItems:"center",gap:"10px"},onMouseEnter:T=>T.currentTarget.style.backgroundColor="#f5f5f5",onMouseLeave:T=>T.currentTarget.style.backgroundColor="white",children:e.jsxs("div",{children:[e.jsxs("div",{style:{fontWeight:"bold"},children:[N.first_name||""," ",N.last_name||""]}),e.jsxs("div",{style:{fontSize:"12px",color:"#666"},children:[N.position||""," ",N.department?`‚Ä¢ ${N.department}`:""]})]})},N.id))}),o&&e.jsxs("div",{style:{marginTop:"12px",padding:"12px",backgroundColor:"#f0f9ff",borderRadius:"8px",border:"1px solid #2196F3"},children:[e.jsxs("div",{style:{fontWeight:"bold",marginBottom:"4px"},children:["–í—ã–±—Ä–∞–Ω: ",o.first_name||""," ",o.last_name||""]}),e.jsxs("div",{style:{fontSize:"12px",color:"#666"},children:[o.position||""," ",o.department?`‚Ä¢ ${o.department}`:""]}),o.login&&e.jsxs("div",{style:{fontSize:"12px",color:"#ff9800",marginTop:"4px"},children:["‚ö†Ô∏è –£ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —É–∂–µ –µ—Å—Ç—å –ª–æ–≥–∏–Ω: ",o.login]})]})]}),e.jsxs("div",{style:{marginBottom:"20px"},children:[e.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"bold"},children:"–õ–æ–≥–∏–Ω: *"}),e.jsx("input",{type:"text",value:x,onChange:N=>j(N.target.value),placeholder:"–í–≤–µ–¥–∏—Ç–µ –ª–æ–≥–∏–Ω (–º–∏–Ω–∏–º—É–º 3 —Å–∏–º–≤–æ–ª–∞)",className:s.input,required:!0,minLength:3})]}),e.jsxs("div",{style:{marginBottom:"20px"},children:[e.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"bold"},children:"–ü–∞—Ä–æ–ª—å: *"}),e.jsxs("div",{style:{display:"flex",gap:"10px",alignItems:"center"},children:[e.jsx("input",{type:"text",value:c,onChange:N=>u(N.target.value),placeholder:"–í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å (–º–∏–Ω–∏–º—É–º 6 —Å–∏–º–≤–æ–ª–æ–≤)",className:s.input,style:{flex:1},required:!0,minLength:6}),e.jsxs("button",{type:"button",onClick:Ee,style:{padding:"10px 15px",backgroundColor:"#4caf50",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",display:"flex",alignItems:"center",gap:"5px",whiteSpace:"nowrap"},title:"–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —Å–ª—É—á–∞–π–Ω—ã–π –ø–∞—Ä–æ–ª—å",children:[e.jsx(ke,{})," –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å"]})]})]}),e.jsx("button",{type:"submit",className:s.buttonGreen,disabled:_||!o,children:_?"–£—Å—Ç–∞–Ω–æ–≤–∫–∞...":"–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —É—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ"})]})}),v&&e.jsxs("div",{className:s.card,style:{marginTop:"20px",backgroundColor:"#f0f9ff",border:"2px solid #2196F3"},children:[e.jsx("h3",{style:{marginTop:0,color:"#2196F3"},children:"–£—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã!"}),e.jsx("p",{style:{marginBottom:"15px",color:"#666"},children:"–°–æ—Ö—Ä–∞–Ω–∏—Ç–µ —ç—Ç–∏ –¥–∞–Ω–Ω—ã–µ. –ü–∞—Ä–æ–ª—å –±–æ–ª—å—à–µ –Ω–µ –±—É–¥–µ—Ç –ø–æ–∫–∞–∑–∞–Ω."}),e.jsxs("div",{style:{marginBottom:"15px"},children:[e.jsx("label",{style:{display:"block",marginBottom:"5px",fontWeight:"bold"},children:"–õ–æ–≥–∏–Ω:"}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[e.jsx("input",{type:"text",value:v.login,readOnly:!0,className:s.input,style:{flex:1,backgroundColor:"#fff"}}),e.jsxs("button",{type:"button",onClick:()=>me(v.login,"login"),style:{padding:"10px 15px",backgroundColor:f.login?"#4caf50":"#2196F3",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",display:"flex",alignItems:"center",gap:"5px"},children:[f.login?e.jsx(le,{}):e.jsx(ee,{}),f.login?"–°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ":"–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å"]})]})]}),e.jsxs("div",{style:{marginBottom:"15px"},children:[e.jsx("label",{style:{display:"block",marginBottom:"5px",fontWeight:"bold"},children:"–ü–∞—Ä–æ–ª—å:"}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[e.jsx("input",{type:"text",value:v.password,readOnly:!0,className:s.input,style:{flex:1,backgroundColor:"#fff"}}),e.jsxs("button",{type:"button",onClick:()=>me(v.password,"password"),style:{padding:"10px 15px",backgroundColor:f.password?"#4caf50":"#2196F3",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",display:"flex",alignItems:"center",gap:"5px"},children:[f.password?e.jsx(le,{}):e.jsx(ee,{}),f.password?"–°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ":"–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å"]})]})]})]})]}),i==="bulk"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:s.card,children:e.jsxs("form",{onSubmit:Me,children:[e.jsx("h3",{style:{marginTop:0,marginBottom:"20px"},children:"–ú–∞—Å—Å–æ–≤–∞—è —Ä–∞—Å—Å—ã–ª–∫–∞ —É—á–µ—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö"}),e.jsxs("div",{style:{marginBottom:"20px"},children:[e.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"bold"},children:"–¢–µ–∫—Å—Ç–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ):"}),e.jsx("textarea",{value:w,onChange:N=>a(N.target.value),placeholder:"–í–≤–µ–¥–∏—Ç–µ —Ç–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è, –∫–æ—Ç–æ—Ä–æ–µ –±—É–¥–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω–æ –∫ —Ä–∞—Å—Å—ã–ª–∫–µ —É—á–µ—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö...",className:s.input,style:{minHeight:"100px",resize:"vertical"},rows:4}),e.jsx("div",{style:{fontSize:"12px",color:"#666",marginTop:"5px"},children:"–≠—Ç–æ —Å–æ–æ–±—â–µ–Ω–∏–µ –±—É–¥–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω–æ –ø–µ—Ä–µ–¥ –ª–æ–≥–∏–Ω–æ–º –∏ –ø–∞—Ä–æ–ª–µ–º –≤ –∫–∞–∂–¥–æ–º —Å–æ–æ–±—â–µ–Ω–∏–∏."})]}),e.jsxs("div",{style:{marginBottom:"20px"},children:[e.jsx("label",{style:{display:"block",marginBottom:"12px",fontWeight:"bold"},children:"–í—ã–±–µ—Ä–∏—Ç–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –¥–ª—è —Ä–∞—Å—Å—ã–ª–∫–∏:"}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:[e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"10px",cursor:"pointer"},children:[e.jsx("input",{type:"checkbox",checked:m,onChange:N=>L(N.target.checked),style:{width:"18px",height:"18px",cursor:"pointer"}}),e.jsx("span",{children:"–í–∫–ª—é—á–∏—Ç—å –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π"})]}),e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"10px",cursor:"pointer"},children:[e.jsx("input",{type:"checkbox",checked:$,onChange:N=>E(N.target.checked),style:{width:"18px",height:"18px",cursor:"pointer"}}),e.jsx("span",{children:"–í–∫–ª—é—á–∏—Ç—å –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π"})]}),e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"10px",cursor:"pointer"},children:[e.jsx("input",{type:"checkbox",checked:S,onChange:N=>R(N.target.checked),style:{width:"18px",height:"18px",cursor:"pointer"}}),e.jsx("span",{children:"–ü–µ—Ä–µ–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏ —É—á–µ—Ç–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏"})]})]})]}),e.jsxs("div",{style:{padding:"15px",backgroundColor:"#fff3cd",borderRadius:"8px",marginBottom:"20px",border:"1px solid #ffc107"},children:[e.jsx("div",{style:{fontWeight:"bold",marginBottom:"5px",color:"#856404"},children:"‚ö†Ô∏è –í–∞–∂–Ω–æ:"}),e.jsxs("div",{style:{fontSize:"14px",color:"#856404"},children:["‚Ä¢ –£—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –±—É–¥—É—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω—ã –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è",e.jsx("br",{}),"‚Ä¢ –õ–æ–≥–∏–Ω —Å–æ–∑–¥–∞–µ—Ç—Å—è –Ω–∞ –æ—Å–Ω–æ–≤–µ –∏–º–µ–Ω–∏ –∏ —Ñ–∞–º–∏–ª–∏–∏",e.jsx("br",{}),"‚Ä¢ –ü–∞—Ä–æ–ª—å –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è —Å–ª—É—á–∞–π–Ω—ã–º –æ–±—Ä–∞–∑–æ–º",e.jsx("br",{}),"‚Ä¢ –°–æ–æ–±—â–µ–Ω–∏—è –±—É–¥—É—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã —á–µ—Ä–µ–∑ Telegram",e.jsx("br",{}),"‚Ä¢ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –±–µ–∑ Telegram ID –±—É–¥—É—Ç –ø—Ä–æ–ø—É—â–µ–Ω—ã"]})]}),e.jsxs("button",{type:"submit",className:s.buttonGreen,disabled:X||!m&&!$,style:{display:"flex",alignItems:"center",gap:"8px",justifyContent:"center"},children:[e.jsx(tt,{}),X?"–û—Ç–ø—Ä–∞–≤–∫–∞...":"–û—Ç–ø—Ä–∞–≤–∏—Ç—å –º–∞—Å—Å–æ–≤—É—é —Ä–∞—Å—Å—ã–ª–∫—É"]})]})}),Q&&e.jsxs("div",{className:s.card,style:{marginTop:"20px",backgroundColor:"#f0f9ff",border:"2px solid #2196F3"},children:[e.jsx("h3",{style:{marginTop:0,color:"#2196F3"},children:"–†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ä–∞—Å—Å—ã–ª–∫–∏"}),e.jsxs("div",{style:{marginBottom:"15px"},children:[e.jsxs("div",{style:{marginBottom:"8px"},children:[e.jsx("strong",{children:"–í—Å–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –Ω–∞–π–¥–µ–Ω–æ:"})," ",Q.total_users]}),e.jsxs("div",{style:{marginBottom:"8px",color:"#4caf50"},children:[e.jsx("strong",{children:"‚úì –£—á–µ—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–æ:"})," ",Q.credentials_generated]}),e.jsxs("div",{style:{marginBottom:"8px",color:"#2196F3"},children:[e.jsx("strong",{children:"üì® –°–æ–æ–±—â–µ–Ω–∏–π –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ:"})," ",Q.messages_sent]}),Q.failed_users&&Q.failed_users.length>0&&e.jsxs("div",{style:{marginTop:"15px",color:"#f44336"},children:[e.jsx("strong",{children:"‚ùå –û—à–∏–±–∫–∏ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ (ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π):"}),e.jsx("div",{style:{marginTop:"5px",fontSize:"12px"},children:Q.failed_users.join(", ")})]})]})]})]})]})}const Zn="_usersList_joqgg_3",ea="_userCard_joqgg_10",ta="_userInfo_joqgg_21",sa="_userDetails_joqgg_31",na="_actions_joqgg_48",aa="_approveButton_joqgg_55",ra="_rejectButton_joqgg_56",ia="_credentialsBox_joqgg_94",oa="_credentialsTitle_joqgg_102",la="_credentialItem_joqgg_108",ca="_credentialValue_joqgg_124",da="_copyButton_joqgg_141",ua="_eyeButton_joqgg_142",pa="_modalOverlay_joqgg_166",ha="_modalContent_joqgg_180",ma="_modalTitle_joqgg_189",xa="_modalWarning_joqgg_196",_a="_modalCredentials_joqgg_203",ga="_modalCredentialItem_joqgg_207",ja="_modalCredentialValue_joqgg_223",fa="_modalCopyButton_joqgg_241",ba="_modalEyeButton_joqgg_242",ya="_modalButtons_joqgg_261",va="_modalGoToLoginButton_joqgg_267",Ca="_modalCloseButton_joqgg_284",A={usersList:Zn,userCard:ea,userInfo:ta,userDetails:sa,actions:na,approveButton:aa,rejectButton:ra,credentialsBox:ia,credentialsTitle:oa,credentialItem:la,credentialValue:ca,copyButton:da,eyeButton:ua,modalOverlay:pa,modalContent:ha,modalTitle:ma,modalWarning:xa,modalCredentials:_a,modalCredentialItem:ga,modalCredentialValue:ja,modalCopyButton:fa,modalEyeButton:ba,modalButtons:ya,modalGoToLoginButton:va,modalCloseButton:Ca};function Na(){const{showAlert:t}=V(),{confirm:l}=Y(),[i,h]=r.useState([]),[o,g]=r.useState(!0),[d,p]=r.useState(new Set),[n,C]=r.useState({}),[b,y]=r.useState({}),[x,j]=r.useState(!1),[c,u]=r.useState(null),[v,k]=r.useState(!1),_=async()=>{try{g(!0);const a=await Et();h(a.data)}catch{t("–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å —Å–ø–∏—Å–æ–∫ –∑–∞—è–≤–æ–∫","error")}finally{g(!1)}};r.useEffect(()=>{_()},[]);const I=async a=>{var $,E;const m=i.find(S=>S.id===a);if(await l("–û–¥–æ–±—Ä–µ–Ω–∏–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏",`–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ –æ–¥–æ–±—Ä–∏—Ç—å —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è ${m==null?void 0:m.first_name} ${m==null?void 0:m.last_name}?`)){p(S=>new Set(S).add(a));try{const R=(await Ft(a)).data;if(R.credentials_generated&&R.login&&R.password){const X={login:R.login,password:R.password};C(ae=>({...ae,[a]:X})),sessionStorage.setItem("pendingLoginCredentials",JSON.stringify(X)),u(X),j(!0)}t("–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –æ–¥–æ–±—Ä–µ–Ω–∞","success"),await _()}catch(S){t(((E=($=S.response)==null?void 0:$.data)==null?void 0:E.detail)||"–ù–µ —É–¥–∞–ª–æ—Å—å –æ–¥–æ–±—Ä–∏—Ç—å —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é","error")}finally{p(S=>{const R=new Set(S);return R.delete(a),R})}}},B=async(a,m)=>{try{await navigator.clipboard.writeText(a),t(`${m} —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞`,"success")}catch{t(`–ù–µ —É–¥–∞–ª–æ—Å—å —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å ${m}`,"error")}},M=a=>{y(m=>({...m,[a]:!m[a]}))},f=()=>{c&&sessionStorage.setItem("pendingLoginCredentials",JSON.stringify(c)),j(!1),u(null),window.location.href="/"},P=()=>{j(!1),u(null),k(!1)},w=async a=>{var $,E;const m=i.find(S=>S.id===a);if(await l("–û—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏",`–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ –æ—Ç–∫–ª–æ–Ω–∏—Ç—å —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è ${m==null?void 0:m.first_name} ${m==null?void 0:m.last_name}?`)){p(S=>new Set(S).add(a));try{await Tt(a),t("–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –æ—Ç–∫–ª–æ–Ω–µ–Ω–∞","success"),await _()}catch(S){t(((E=($=S.response)==null?void 0:$.data)==null?void 0:E.detail)||"–ù–µ —É–¥–∞–ª–æ—Å—å –æ—Ç–∫–ª–æ–Ω–∏—Ç—å —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é","error")}finally{p(S=>{const R=new Set(S);return R.delete(a),R})}}};return o?e.jsx("div",{className:s.card,children:"–ó–∞–≥—Ä—É–∑–∫–∞..."}):i.length===0?e.jsxs("div",{className:s.card,children:[e.jsx("h2",{children:"–ó–∞—è–≤–∫–∏ –Ω–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é"}),e.jsx("p",{children:"–ù–µ—Ç –∑–∞—è–≤–æ–∫, –æ–∂–∏–¥–∞—é—â–∏—Ö —Ä–∞—Å—Å–º–æ—Ç—Ä–µ–Ω–∏—è"})]}):e.jsxs("div",{className:s.card,children:[e.jsxs("h2",{children:["–ó–∞—è–≤–∫–∏ –Ω–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é (",i.length,")"]}),e.jsx("div",{className:A.usersList,children:i.map(a=>{const m=d.has(a.id),L=n[a.id],$=b[a.id],E=!a.telegram_id||a.telegram_id<0;return e.jsxs("div",{className:A.userCard,children:[e.jsxs("div",{className:A.userInfo,children:[e.jsxs("h3",{children:[a.first_name||""," ",a.last_name||""]}),e.jsxs("div",{className:A.userDetails,children:[e.jsxs("p",{children:[e.jsx("strong",{children:"–î–æ–ª–∂–Ω–æ—Å—Ç—å:"})," ",a.position||"–Ω–µ —É–∫–∞–∑–∞–Ω–∞"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"–ü–æ–¥—Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ:"})," ",a.department||"–Ω–µ —É–∫–∞–∑–∞–Ω–æ"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"–¢–µ–ª–µ—Ñ–æ–Ω:"})," ",a.phone_number||"–Ω–µ —É–∫–∞–∑–∞–Ω"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"–î–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è:"})," ",ce(a.date_of_birth)||"–Ω–µ —É–∫–∞–∑–∞–Ω–∞"]}),a.telegram_id&&e.jsxs("p",{children:[e.jsx("strong",{children:"Telegram ID:"})," ",a.telegram_id]}),e.jsxs("p",{children:[e.jsx("strong",{children:"–î–∞—Ç–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏:"})," ",ce(a.registration_date)||"–Ω–µ —É–∫–∞–∑–∞–Ω–∞"]})]}),L&&E&&e.jsxs("div",{className:A.credentialsBox,children:[e.jsx("p",{className:A.credentialsTitle,children:e.jsx("strong",{children:"‚ö†Ô∏è –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è –≤—Ö–æ–¥–∞:"})}),e.jsxs("div",{className:A.credentialItem,children:[e.jsx("label",{children:"–õ–æ–≥–∏–Ω:"}),e.jsxs("div",{className:A.credentialValue,children:[e.jsx("span",{children:L.login}),e.jsx("button",{type:"button",onClick:()=>B(L.login,"–õ–æ–≥–∏–Ω"),className:A.copyButton,title:"–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å –ª–æ–≥–∏–Ω",children:e.jsx(ee,{})})]})]}),e.jsxs("div",{className:A.credentialItem,children:[e.jsx("label",{children:"–ü–∞—Ä–æ–ª—å:"}),e.jsxs("div",{className:A.credentialValue,children:[e.jsx("span",{children:$?L.password:"‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢"}),e.jsx("button",{type:"button",onClick:()=>M(a.id),className:A.eyeButton,title:$?"–°–∫—Ä—ã—Ç—å –ø–∞—Ä–æ–ª—å":"–ü–æ–∫–∞–∑–∞—Ç—å –ø–∞—Ä–æ–ª—å",children:$?e.jsx(_e,{}):e.jsx(ge,{})}),e.jsx("button",{type:"button",onClick:()=>B(L.password,"–ü–∞—Ä–æ–ª—å"),className:A.copyButton,title:"–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å –ø–∞—Ä–æ–ª—å",children:e.jsx(ee,{})})]})]})]})]}),e.jsxs("div",{className:A.actions,children:[e.jsxs("button",{onClick:()=>I(a.id),disabled:m,className:A.approveButton,title:"–û–¥–æ–±—Ä–∏—Ç—å",children:[e.jsx(le,{})," –û–¥–æ–±—Ä–∏—Ç—å"]}),e.jsxs("button",{onClick:()=>w(a.id),disabled:m,className:A.rejectButton,title:"–û—Ç–∫–ª–æ–Ω–∏—Ç—å",children:[e.jsx(Se,{})," –û—Ç–∫–ª–æ–Ω–∏—Ç—å"]})]})]},a.id)})}),x&&c&&e.jsx("div",{className:A.modalOverlay,onClick:P,children:e.jsxs("div",{className:A.modalContent,onClick:a=>a.stopPropagation(),children:[e.jsx("h2",{className:A.modalTitle,children:"–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –æ–¥–æ–±—Ä–µ–Ω–∞!"}),e.jsxs("p",{className:A.modalWarning,children:["‚ö†Ô∏è ",e.jsx("strong",{children:"–°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è –≤—Ö–æ–¥–∞:"})]}),e.jsxs("div",{className:A.modalCredentials,children:[e.jsxs("div",{className:A.modalCredentialItem,children:[e.jsx("label",{children:"–õ–æ–≥–∏–Ω:"}),e.jsxs("div",{className:A.modalCredentialValue,children:[e.jsx("span",{children:c.login}),e.jsx("button",{type:"button",onClick:()=>B(c.login,"–õ–æ–≥–∏–Ω"),className:A.modalCopyButton,title:"–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å –ª–æ–≥–∏–Ω",children:e.jsx(ee,{})})]})]}),e.jsxs("div",{className:A.modalCredentialItem,children:[e.jsx("label",{children:"–ü–∞—Ä–æ–ª—å:"}),e.jsxs("div",{className:A.modalCredentialValue,children:[e.jsx("span",{children:v?c.password:"‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢"}),e.jsx("button",{type:"button",onClick:()=>k(!v),className:A.modalEyeButton,title:v?"–°–∫—Ä—ã—Ç—å –ø–∞—Ä–æ–ª—å":"–ü–æ–∫–∞–∑–∞—Ç—å –ø–∞—Ä–æ–ª—å",children:v?e.jsx(_e,{}):e.jsx(ge,{})}),e.jsx("button",{type:"button",onClick:()=>B(c.password,"–ü–∞—Ä–æ–ª—å"),className:A.modalCopyButton,title:"–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å –ø–∞—Ä–æ–ª—å",children:e.jsx(ee,{})})]})]})]}),e.jsxs("div",{className:A.modalButtons,children:[e.jsx("button",{onClick:f,className:A.modalGoToLoginButton,children:"–ü–µ—Ä–µ–π—Ç–∏ –∫ –≤—Ö–æ–¥—É"}),e.jsx("button",{onClick:P,className:A.modalCloseButton,children:"–ó–∞–∫—Ä—ã—Ç—å"})]})]})})]})}const wa="_container_1iwrh_3",Sa="_loading_1iwrh_14",ka="_empty_1iwrh_14",Ba="_spinner_1iwrh_23",Ia="_emptyIcon_1iwrh_34",La="_purchasesList_1iwrh_40",Aa="_purchaseCard_1iwrh_46",Pa="_purchaseHeader_1iwrh_54",$a="_purchaseDate_1iwrh_69",Da="_purchaseInfo_1iwrh_75",Ea="_purchaseActions_1iwrh_94",Fa="_approveButton_1iwrh_99",Ta="_rejectButton_1iwrh_99",U={container:wa,loading:Sa,empty:ka,spinner:Ba,emptyIcon:Ia,purchasesList:La,purchaseCard:Aa,purchaseHeader:Pa,purchaseDate:$a,purchaseInfo:Da,purchaseActions:Ea,approveButton:Fa,rejectButton:Ta};function Ua(){const{showAlert:t}=V(),{confirm:l}=Y(),[i,h]=r.useState([]),[o,g]=r.useState(!0),[d,p]=r.useState(new Set);r.useEffect(()=>{n()},[]);const n=async()=>{try{g(!0);const x=await Ut();h(x.data)}catch{t("–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å —Å–ø–∏—Å–æ–∫ –ø–æ–∫—É–ø–æ–∫","error")}finally{g(!1)}},C=async x=>{var c,u;if(await l("–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ","–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ –æ–¥–æ–±—Ä–∏—Ç—å —ç—Ç—É –ø–æ–∫—É–ø–∫—É?")){p(v=>new Set(v).add(x));try{await Mt(x),t("–ü–æ–∫—É–ø–∫–∞ –æ–¥–æ–±—Ä–µ–Ω–∞","success"),await n()}catch(v){const k=((u=(c=v.response)==null?void 0:c.data)==null?void 0:u.detail)||"–ù–µ —É–¥–∞–ª–æ—Å—å –æ–¥–æ–±—Ä–∏—Ç—å –ø–æ–∫—É–ø–∫—É";t(k,"error")}finally{p(v=>{const k=new Set(v);return k.delete(x),k})}}},b=async x=>{var c,u;if(await l("–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ","–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ –æ—Ç–∫–ª–æ–Ω–∏—Ç—å —ç—Ç—É –ø–æ–∫—É–ø–∫—É? –°–ø–∞—Å–∏–±–∫–∏ –±—É–¥—É—Ç –≤–æ–∑–≤—Ä–∞—â–µ–Ω—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é.")){p(v=>new Set(v).add(x));try{await Rt(x),t("–ü–æ–∫—É–ø–∫–∞ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∞","success"),await n()}catch(v){const k=((u=(c=v.response)==null?void 0:c.data)==null?void 0:u.detail)||"–ù–µ —É–¥–∞–ª–æ—Å—å –æ—Ç–∫–ª–æ–Ω–∏—Ç—å –ø–æ–∫—É–ø–∫—É";t(k,"error")}finally{p(v=>{const k=new Set(v);return k.delete(x),k})}}},y=x=>x?new Date(x).toLocaleString("ru-RU",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}):"–ù–µ —É–∫–∞–∑–∞–Ω–æ";return o?e.jsxs("div",{className:U.loading,children:[e.jsx(te,{className:U.spinner}),e.jsx("p",{children:"–ó–∞–≥—Ä—É–∑–∫–∞..."})]}):i.length===0?e.jsxs("div",{className:U.empty,children:[e.jsx(st,{className:U.emptyIcon}),e.jsx("p",{children:"–ù–µ—Ç –ø–æ–∫—É–ø–æ–∫, –æ–∂–∏–¥–∞—é—â–∏—Ö —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏—è"})]}):e.jsxs("div",{className:U.container,children:[e.jsx("h2",{children:"–ü–æ–∫—É–ø–∫–∏, –æ–∂–∏–¥–∞—é—â–∏–µ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏—è"}),e.jsx("div",{className:U.purchasesList,children:i.map(x=>{const j=d.has(x.id);return e.jsxs("div",{className:U.purchaseCard,children:[e.jsxs("div",{className:U.purchaseHeader,children:[e.jsx("h3",{children:x.item_name}),e.jsx("span",{className:U.purchaseDate,children:y(x.created_at)})]}),e.jsxs("div",{className:U.purchaseInfo,children:[e.jsxs("p",{children:[e.jsx("strong",{children:"–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å:"})," ",x.user_name]}),e.jsxs("p",{children:[e.jsx("strong",{children:"–ì–æ—Ä–æ–¥:"})," ",x.city]}),e.jsxs("p",{children:[e.jsx("strong",{children:"–°–∞–π—Ç:"})," ",e.jsx("a",{href:x.website_url,target:"_blank",rel:"noopener noreferrer",children:x.website_url})]}),e.jsxs("p",{children:[e.jsx("strong",{children:"–°—É–º–º–∞:"})," ",x.reserved_amount," —Å–ø–∞—Å–∏–±–æ–∫"]})]}),e.jsxs("div",{className:U.purchaseActions,children:[e.jsxs("button",{onClick:()=>C(x.id),disabled:j,className:U.approveButton,children:[j?e.jsx(te,{className:U.spinner}):e.jsx(Be,{}),"–û–¥–æ–±—Ä–∏—Ç—å"]}),e.jsxs("button",{onClick:()=>b(x.id),disabled:j,className:U.rejectButton,children:[j?e.jsx(te,{className:U.spinner}):e.jsx(Ie,{}),"–û—Ç–∫–ª–æ–Ω–∏—Ç—å"]})]})]},x.id)})})]})}const Ma="_container_nyz71_3",Ra="_loading_nyz71_14",Ga="_empty_nyz71_14",za="_spinner_nyz71_23",qa="_emptyIcon_nyz71_34",Wa="_updatesList_nyz71_40",Va="_updateCard_nyz71_46",Oa="_updateHeader_nyz71_54",Ha="_updateDate_nyz71_68",Ya="_expandButton_nyz71_73",Qa="_updateDetails_nyz71_90",Ja="_fieldChange_nyz71_104",Ka="_changeRow_nyz71_115",Xa="_oldValue_nyz71_122",Za="_arrow_nyz71_130",er="_newValue_nyz71_135",tr="_updateActions_nyz71_143",sr="_approveButton_nyz71_148",nr="_rejectButton_nyz71_148",F={container:Ma,loading:Ra,empty:Ga,spinner:za,emptyIcon:qa,updatesList:Wa,updateCard:Va,updateHeader:Oa,updateDate:Ha,expandButton:Ya,updateDetails:Qa,fieldChange:Ja,changeRow:Ka,oldValue:Xa,arrow:Za,newValue:er,updateActions:tr,approveButton:sr,rejectButton:nr};function ar(){const{showAlert:t}=V(),{confirm:l}=Y(),[i,h]=r.useState([]),[o,g]=r.useState(!0),[d,p]=r.useState(new Set),[n,C]=r.useState(null);r.useEffect(()=>{b()},[]);const b=async()=>{try{g(!0);const u=await Gt();h(u.data)}catch{t("–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å —Å–ø–∏—Å–æ–∫ –∑–∞–ø—Ä–æ—Å–æ–≤","error")}finally{g(!1)}},y=async u=>{var k,_;if(await l("–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ","–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ –æ–¥–æ–±—Ä–∏—Ç—å —ç—Ç–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø—Ä–æ—Ñ–∏–ª—è?")){p(I=>new Set(I).add(u));try{await zt(u),t("–ò–∑–º–µ–Ω–µ–Ω–∏—è –ø—Ä–æ—Ñ–∏–ª—è –æ–¥–æ–±—Ä–µ–Ω—ã","success"),await b(),C(null)}catch(I){const B=((_=(k=I.response)==null?void 0:k.data)==null?void 0:_.detail)||"–ù–µ —É–¥–∞–ª–æ—Å—å –æ–¥–æ–±—Ä–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è";t(B,"error")}finally{p(I=>{const B=new Set(I);return B.delete(u),B})}}},x=async u=>{var k,_;if(await l("–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ","–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ –æ—Ç–∫–ª–æ–Ω–∏—Ç—å —ç—Ç–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø—Ä–æ—Ñ–∏–ª—è?")){p(I=>new Set(I).add(u));try{await qt(u),t("–ò–∑–º–µ–Ω–µ–Ω–∏—è –ø—Ä–æ—Ñ–∏–ª—è –æ—Ç–∫–ª–æ–Ω–µ–Ω—ã","success"),await b(),C(null)}catch(I){const B=((_=(k=I.response)==null?void 0:k.data)==null?void 0:_.detail)||"–ù–µ —É–¥–∞–ª–æ—Å—å –æ—Ç–∫–ª–æ–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è";t(B,"error")}finally{p(I=>{const B=new Set(I);return B.delete(u),B})}}},j=u=>u?new Date(u).toLocaleString("ru-RU",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}):"–ù–µ —É–∫–∞–∑–∞–Ω–æ",c=u=>({last_name:"–§–∞–º–∏–ª–∏—è",department:"–ü–æ–¥—Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ",position:"–î–æ–ª–∂–Ω–æ—Å—Ç—å",phone_number:"–¢–µ–ª–µ—Ñ–æ–Ω",date_of_birth:"–î–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è"})[u]||u;return o?e.jsxs("div",{className:F.loading,children:[e.jsx(te,{className:F.spinner}),e.jsx("p",{children:"–ó–∞–≥—Ä—É–∑–∫–∞..."})]}):i.length===0?e.jsxs("div",{className:F.empty,children:[e.jsx(nt,{className:F.emptyIcon}),e.jsx("p",{children:"–ù–µ—Ç –∑–∞–ø—Ä–æ—Å–æ–≤ –Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è"})]}):e.jsxs("div",{className:F.container,children:[e.jsx("h2",{children:"–ó–∞–ø—Ä–æ—Å—ã –Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è"}),e.jsx("div",{className:F.updatesList,children:i.map(u=>{const v=d.has(u.id),k=n===u.id,_=Object.keys(u.new_data||{});return e.jsxs("div",{className:F.updateCard,children:[e.jsxs("div",{className:F.updateHeader,children:[e.jsxs("div",{children:[e.jsx("h3",{children:u.user_name}),e.jsx("span",{className:F.updateDate,children:j(u.created_at)})]}),e.jsx("button",{onClick:()=>C(k?null:u.id),className:F.expandButton,children:k?"–°–≤–µ—Ä–Ω—É—Ç—å":"–ü–æ–¥—Ä–æ–±–Ω–µ–µ"})]}),k&&e.jsxs("div",{className:F.updateDetails,children:[e.jsx("h4",{children:"–ò–∑–º–µ–Ω–µ–Ω–∏—è:"}),_.map(I=>e.jsxs("div",{className:F.fieldChange,children:[e.jsxs("strong",{children:[c(I),":"]}),e.jsxs("div",{className:F.changeRow,children:[e.jsxs("span",{className:F.oldValue,children:["–°—Ç–∞—Ä–æ–µ: ",u.old_data[I]||"–Ω–µ —É–∫–∞–∑–∞–Ω–æ"]}),e.jsx("span",{className:F.arrow,children:"‚Üí"}),e.jsxs("span",{className:F.newValue,children:["–ù–æ–≤–æ–µ: ",u.new_data[I]||"–Ω–µ —É–∫–∞–∑–∞–Ω–æ"]})]})]},I))]}),e.jsxs("div",{className:F.updateActions,children:[e.jsxs("button",{onClick:()=>y(u.id),disabled:v,className:F.approveButton,children:[v?e.jsx(te,{className:F.spinner}):e.jsx(Be,{}),"–û–¥–æ–±—Ä–∏—Ç—å"]}),e.jsxs("button",{onClick:()=>x(u.id),disabled:v,className:F.rejectButton,children:[v?e.jsx(te,{className:F.spinner}):e.jsx(Ie,{}),"–û—Ç–∫–ª–æ–Ω–∏—Ç—å"]})]})]},u.id)})})]})}function xr(){const[t,l]=r.useState(null),{showAlert:i}=V(),{confirm:h}=Y(),[o,g]=r.useState(!1),d=async()=>{var y,x;if(await h("–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ (–ü—Ä–æ—à–ª—ã–π –º–µ—Å—è—Ü)","–í—ã —É–≤–µ—Ä–µ–Ω—ã? –ë—É–¥—É—Ç —Å–æ–∑–¥–∞–Ω—ã –±–∞–Ω–Ω–µ—Ä—ã –Ω–∞ –æ—Å–Ω–æ–≤–µ –¥–∞–Ω–Ω—ã—Ö –ü–†–û–®–õ–û–ì–û –º–µ—Å—è—Ü–∞. –°—Ç–∞—Ä—ã–µ –±–∞–Ω–Ω–µ—Ä—ã —Ä–µ–π—Ç–∏–Ω–≥–∞ —É–¥–∞–ª—è—Ç—Å—è.")){g("monthly");try{const j=await Wt();i(j.data.detail||"–ë–∞–Ω–Ω–µ—Ä—ã (–ø—Ä–æ—à–ª—ã–π –º–µ—Å—è—Ü) —É—Å–ø–µ—à–Ω–æ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω—ã!","success")}catch(j){const c=((x=(y=j.response)==null?void 0:y.data)==null?void 0:x.detail)||"–ù–µ —É–¥–∞–ª–æ—Å—å –≤—ã–ø–æ–ª–Ω–∏—Ç—å –æ–ø–µ—Ä–∞—Ü–∏—é";i(c,"error")}finally{g(!1)}}},p=async()=>{var y,x;if(await h("–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ (–¢–µ—Å—Ç)","–í—ã —É–≤–µ—Ä–µ–Ω—ã? –ë—É–¥—É—Ç —Å–æ–∑–¥–∞–Ω—ã –¢–ï–°–¢–û–í–´–ï –±–∞–Ω–Ω–µ—Ä—ã –Ω–∞ –æ—Å–Ω–æ–≤–µ –¥–∞–Ω–Ω—ã—Ö –¢–ï–ö–£–©–ï–ì–û –º–µ—Å—è—Ü–∞. –°—Ç–∞—Ä—ã–µ –±–∞–Ω–Ω–µ—Ä—ã —Ä–µ–π—Ç–∏–Ω–≥–∞ —É–¥–∞–ª—è—Ç—Å—è.")){g("test");try{const j=await Vt();i(j.data.detail||"–¢–µ—Å—Ç–æ–≤—ã–µ –±–∞–Ω–Ω–µ—Ä—ã (—Ç–µ–∫—É—â–∏–π –º–µ—Å—è—Ü) —É—Å–ø–µ—à–Ω–æ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω—ã!","success")}catch(j){const c=((x=(y=j.response)==null?void 0:y.data)==null?void 0:x.detail)||"–ù–µ —É–¥–∞–ª–æ—Å—å –≤—ã–ø–æ–ª–Ω–∏—Ç—å –æ–ø–µ—Ä–∞—Ü–∏—é";i(c,"error")}finally{g(!1)}}},n=async()=>{var y,x;if(await h("–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ","–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —Å–±—Ä–æ—Å–∏—Ç—å –ª–∏–º–∏—Ç—ã –Ω–∞ –æ—Ç–ø—Ä–∞–≤–∫—É —Å–ø–∞—Å–∏–±–æ–∫ –∑–∞ –¥–µ–Ω—å —É –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π? –£ –≤—Å–µ—Ö –±—É–¥–µ—Ç –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ 3/3.")){g("reset-limits");try{const j=await Ot();i(j.data.detail||"–õ–∏–º–∏—Ç—ã —É—Å–ø–µ—à–Ω–æ —Å–±—Ä–æ—à–µ–Ω—ã!","success")}catch(j){const c=((x=(y=j.response)==null?void 0:y.data)==null?void 0:x.detail)||"–ù–µ —É–¥–∞–ª–æ—Å—å –≤—ã–ø–æ–ª–Ω–∏—Ç—å –æ–ø–µ—Ä–∞—Ü–∏—é";i(c,"error")}finally{g(!1)}}},C=()=>{if(!t)return e.jsxs("div",{className:s.grid,children:[e.jsx("button",{onClick:()=>l("stats"),className:s.gridButton,children:"–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞"}),e.jsx("button",{onClick:()=>l("users"),className:s.gridButton,children:"–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏"}),e.jsx("button",{onClick:()=>l("registrations"),className:s.gridButton,children:"–ó–∞—è–≤–∫–∏ –Ω–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é"}),e.jsx("button",{onClick:()=>l("purchases"),className:s.gridButton,children:"–ü–æ–∫—É–ø–∫–∏"}),e.jsx("button",{onClick:()=>l("approvals"),className:s.gridButton,children:"–°–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏—è"}),e.jsx("button",{onClick:()=>l("items"),className:s.gridButton,children:"–¢–æ–≤–∞—Ä—ã"}),e.jsx("button",{onClick:()=>l("banners"),className:s.gridButton,children:"–ë–∞–Ω–Ω–µ—Ä—ã"}),e.jsx("button",{onClick:()=>l("credentials"),className:s.gridButton,children:"–ì–µ–Ω–µ—Ä–∞—Ü–∏—è —É—á–µ—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö"}),e.jsx("button",{onClick:d,disabled:o,className:s.gridButton,children:o==="monthly"?"–ì–µ–Ω–µ—Ä–∞—Ü–∏—è...":"–°–æ–∑–¥–∞—Ç—å –ë–∞–Ω–Ω–µ—Ä—ã (–ü—Ä–æ—à–ª—ã–π –º–µ—Å.)"}),e.jsx("button",{onClick:p,disabled:o,className:s.gridButton,children:o==="test"?"–ì–µ–Ω–µ—Ä–∞—Ü–∏—è...":"–°–æ–∑–¥–∞—Ç—å –ë–∞–Ω–Ω–µ—Ä—ã (–¢–µ–∫—É—â–∏–π –º–µ—Å. / –¢–µ—Å—Ç)"}),e.jsx("button",{onClick:n,disabled:o,className:s.gridButton,children:o==="reset-limits"?"–°–±—Ä–æ—Å...":"–°–±—Ä–æ—Å–∏—Ç—å –ª–∏–º–∏—Ç—ã —Å–ø–∞—Å–∏–±–æ–∫ (3/3)"})]});switch(t){case"stats":return e.jsx(Jn,{});case"banners":return e.jsx(Ns,{});case"items":return e.jsx(Ds,{});case"users":return e.jsx(Xs,{});case"registrations":return e.jsx(Na,{});case"purchases":return e.jsx(Ua,{});case"approvals":return e.jsx(ar,{});case"credentials":return e.jsx(Xn,{});default:return null}};return e.jsxs(at,{title:"–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å",children:[t&&e.jsx("button",{onClick:()=>l(null),className:s.backButton,children:"‚Üê –ù–∞–∑–∞–¥ –≤ –º–µ–Ω—é"}),C()]})}export{xr as default};
