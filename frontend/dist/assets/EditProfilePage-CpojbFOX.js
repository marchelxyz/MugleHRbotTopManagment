import{r as o,j as a}from"./react-vendor-CTCOu_cH.js";import{af as P}from"./index-DWD9sWeV.js";import{s as n}from"./RegistrationPage.module-DMDi5ndb.js";import{P as C}from"./PageLayout-BcvhvPkp.js";import"./vendor-62T33e3N.js";import"./lottie-vendor-CdbPF2lo.js";import"./date-vendor-BIBOd_sa.js";import"./chart-vendor-CqyaVfOQ.js";import"./axios-vendor-D5lHaTRS.js";function I({user:e,onBack:g,onSaveSuccess:b}){const[s,N]=o.useState((e==null?void 0:e.last_name)||""),[i,j]=o.useState((e==null?void 0:e.department)||""),[r,y]=o.useState((e==null?void 0:e.position)||""),[p,v]=o.useState((e==null?void 0:e.phone_number)||""),[m,S]=o.useState((e==null?void 0:e.date_of_birth)||""),[c,l]=o.useState(""),[u,d]=o.useState(!1),_=async t=>{var h,f;if(t.preventDefault(),!s||!i||!r){l("Фамилия, подразделение и должность обязательны.");return}d(!0),l("");try{await P({last_name:s,department:i,position:r,phone_number:p||"",date_of_birth:m||""}),b()}catch(x){l(((f=(h=x.response)==null?void 0:h.data)==null?void 0:f.detail)||"Не удалось отправить запрос. Попробуйте снова.")}finally{d(!1)}};return a.jsxs(C,{title:"Редактирование профиля",children:[a.jsx("button",{onClick:g,className:n.backButton,children:"← Назад в профиль"}),a.jsx("p",{className:n.subtitle,children:"Ваши изменения будут отправлены на проверку администратору."}),a.jsxs("form",{onSubmit:_,className:n.form,children:[a.jsx("input",{type:"text",value:s,onChange:t=>N(t.target.value),placeholder:"Ваша фамилия",className:n.input,required:!0}),a.jsx("input",{type:"text",value:i,onChange:t=>j(t.target.value),placeholder:"Ваше подразделение",className:n.input,required:!0}),a.jsx("input",{type:"text",value:r,onChange:t=>y(t.target.value),placeholder:"Ваша должность",className:n.input,required:!0}),a.jsx("input",{type:"tel",value:p,onChange:t=>v(t.target.value),placeholder:"Номер телефона (необязательно)",className:n.input}),a.jsx("input",{type:"text",onFocus:t=>t.target.type="date",onBlur:t=>{t.target.value||(t.target.type="text")},value:m,onChange:t=>S(t.target.value),placeholder:"Дата рождения (необязательно)",className:n.input}),a.jsx("button",{type:"submit",disabled:u,className:n.submitButton,children:u?"Отправка...":"Отправить на согласование"}),c&&a.jsx("p",{className:n.error,children:c})]})]})}export{I as default};
